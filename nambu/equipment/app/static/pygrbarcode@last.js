var Xr=Object.defineProperty,Wr=Object.defineProperties;var qr=Object.getOwnPropertyDescriptors;var An=Object.getOwnPropertySymbols;var Gr=Object.prototype.hasOwnProperty,Qr=Object.prototype.propertyIsEnumerable;var Cn=(xt,et,dt)=>et in xt?Xr(xt,et,{enumerable:!0,configurable:!0,writable:!0,value:dt}):xt[et]=dt,vt=(xt,et)=>{for(var dt in et||(et={}))Gr.call(et,dt)&&Cn(xt,dt,et[dt]);if(An)for(var dt of An(et))Qr.call(et,dt)&&Cn(xt,dt,et[dt]);return xt},fi=(xt,et)=>Wr(xt,qr(et));(function(){"use strict";const xt=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function e(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=e(n);fetch(n.href,s)}};var et,dt=new Uint8Array(16);function En(){if(!et&&(et=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!et))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return et(dt)}var _n=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Mn(o){return typeof o=="string"&&_n.test(o)}for(var it=[],Le=0;Le<256;++Le)it.push((Le+256).toString(16).substr(1));function Pn(o){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(it[o[t+0]]+it[o[t+1]]+it[o[t+2]]+it[o[t+3]]+"-"+it[o[t+4]]+it[o[t+5]]+"-"+it[o[t+6]]+it[o[t+7]]+"-"+it[o[t+8]]+it[o[t+9]]+"-"+it[o[t+10]]+it[o[t+11]]+it[o[t+12]]+it[o[t+13]]+it[o[t+14]]+it[o[t+15]]).toLowerCase();if(!Mn(e))throw TypeError("Stringified UUID is invalid");return e}function On(o,t,e){o=o||{};var i=o.random||(o.rng||En)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,t){e=e||0;for(var n=0;n<16;++n)t[e+n]=i[n];return t}return Pn(i)}class Nn{setValue(t,e,i){const n=new Date;n.setDate(n.getDate()+i);const s=escape(e)+(i==null?"":"; expires="+n.toGMTString());document.cookie=t+"="+s}getValue(t){t=t+"=";const e=document.cookie;let i=e.indexOf(t),n="";if(i!=-1){i+=t.length;let s=e.indexOf(";",i);s==-1&&(s=e.length),n=e.substring(i,s)}return unescape(n)}deleteValue(t){const e=new Date;e.setDate(e.getDate()-1),document.cookie=t+"= ; expires="+e.toGMTString()}}var _t=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},di={exports:{}};(function(o,t){(function(e,i){o.exports=i()})(_t,function(){var e=1e3,i=6e4,n=36e5,s="millisecond",a="second",r="minute",l="hour",c="day",u="week",h="month",d="quarter",f="year",g="date",p="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,T={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},x=function(_,S,v){var E=String(_);return!E||E.length>=S?_:""+Array(S+1-E.length).join(v)+_},A={s:x,z:function(_){var S=-_.utcOffset(),v=Math.abs(S),E=Math.floor(v/60),w=v%60;return(S<=0?"+":"-")+x(E,2,"0")+":"+x(w,2,"0")},m:function _(S,v){if(S.date()<v.date())return-_(v,S);var E=12*(v.year()-S.year())+(v.month()-S.month()),w=S.clone().add(E,h),O=v-w<0,C=S.clone().add(E+(O?-1:1),h);return+(-(E+(v-w)/(O?w-C:C-w))||0)},a:function(_){return _<0?Math.ceil(_)||0:Math.floor(_)},p:function(_){return{M:h,y:f,w:u,d:c,D:g,h:l,m:r,s:a,ms:s,Q:d}[_]||String(_||"").toLowerCase().replace(/s$/,"")},u:function(_){return _===void 0}},B="en",R={};R[B]=T;var N=function(_){return _ instanceof W},H=function _(S,v,E){var w;if(!S)return B;if(typeof S=="string"){var O=S.toLowerCase();R[O]&&(w=O),v&&(R[O]=v,w=O);var C=S.split("-");if(!w&&C.length>1)return _(C[0])}else{var V=S.name;R[V]=S,w=V}return!E&&w&&(B=w),w||!E&&B},k=function(_,S){if(N(_))return _.clone();var v=typeof S=="object"?S:{};return v.date=_,v.args=arguments,new W(v)},D=A;D.l=H,D.i=N,D.w=function(_,S){return k(_,{locale:S.$L,utc:S.$u,x:S.$x,$offset:S.$offset})};var W=function(){function _(v){this.$L=H(v.locale,null,!0),this.parse(v)}var S=_.prototype;return S.parse=function(v){this.$d=function(E){var w=E.date,O=E.utc;if(w===null)return new Date(NaN);if(D.u(w))return new Date;if(w instanceof Date)return new Date(w);if(typeof w=="string"&&!/Z$/i.test(w)){var C=w.match(m);if(C){var V=C[2]-1||0,Y=(C[7]||"0").substring(0,3);return O?new Date(Date.UTC(C[1],V,C[3]||1,C[4]||0,C[5]||0,C[6]||0,Y)):new Date(C[1],V,C[3]||1,C[4]||0,C[5]||0,C[6]||0,Y)}}return new Date(w)}(v),this.$x=v.x||{},this.init()},S.init=function(){var v=this.$d;this.$y=v.getFullYear(),this.$M=v.getMonth(),this.$D=v.getDate(),this.$W=v.getDay(),this.$H=v.getHours(),this.$m=v.getMinutes(),this.$s=v.getSeconds(),this.$ms=v.getMilliseconds()},S.$utils=function(){return D},S.isValid=function(){return this.$d.toString()!==p},S.isSame=function(v,E){var w=k(v);return this.startOf(E)<=w&&w<=this.endOf(E)},S.isAfter=function(v,E){return k(v)<this.startOf(E)},S.isBefore=function(v,E){return this.endOf(E)<k(v)},S.$g=function(v,E,w){return D.u(v)?this[E]:this.set(w,v)},S.unix=function(){return Math.floor(this.valueOf()/1e3)},S.valueOf=function(){return this.$d.getTime()},S.startOf=function(v,E){var w=this,O=!!D.u(E)||E,C=D.p(v),V=function(Et,st){var ft=D.w(w.$u?Date.UTC(w.$y,st,Et):new Date(w.$y,st,Et),w);return O?ft:ft.endOf(c)},Y=function(Et,st){return D.w(w.toDate()[Et].apply(w.toDate("s"),(O?[0,0,0,0]:[23,59,59,999]).slice(st)),w)},X=this.$W,G=this.$M,nt=this.$D,ot="set"+(this.$u?"UTC":"");switch(C){case f:return O?V(1,0):V(31,11);case h:return O?V(1,G):V(0,G+1);case u:var wt=this.$locale().weekStart||0,Rt=(X<wt?X+7:X)-wt;return V(O?nt-Rt:nt+(6-Rt),G);case c:case g:return Y(ot+"Hours",0);case l:return Y(ot+"Minutes",1);case r:return Y(ot+"Seconds",2);case a:return Y(ot+"Milliseconds",3);default:return this.clone()}},S.endOf=function(v){return this.startOf(v,!1)},S.$set=function(v,E){var w,O=D.p(v),C="set"+(this.$u?"UTC":""),V=(w={},w[c]=C+"Date",w[g]=C+"Date",w[h]=C+"Month",w[f]=C+"FullYear",w[l]=C+"Hours",w[r]=C+"Minutes",w[a]=C+"Seconds",w[s]=C+"Milliseconds",w)[O],Y=O===c?this.$D+(E-this.$W):E;if(O===h||O===f){var X=this.clone().set(g,1);X.$d[V](Y),X.init(),this.$d=X.set(g,Math.min(this.$D,X.daysInMonth())).$d}else V&&this.$d[V](Y);return this.init(),this},S.set=function(v,E){return this.clone().$set(v,E)},S.get=function(v){return this[D.p(v)]()},S.add=function(v,E){var w,O=this;v=Number(v);var C=D.p(E),V=function(G){var nt=k(O);return D.w(nt.date(nt.date()+Math.round(G*v)),O)};if(C===h)return this.set(h,this.$M+v);if(C===f)return this.set(f,this.$y+v);if(C===c)return V(1);if(C===u)return V(7);var Y=(w={},w[r]=i,w[l]=n,w[a]=e,w)[C]||1,X=this.$d.getTime()+v*Y;return D.w(X,this)},S.subtract=function(v,E){return this.add(-1*v,E)},S.format=function(v){var E=this,w=this.$locale();if(!this.isValid())return w.invalidDate||p;var O=v||"YYYY-MM-DDTHH:mm:ssZ",C=D.z(this),V=this.$H,Y=this.$m,X=this.$M,G=w.weekdays,nt=w.months,ot=function(st,ft,zt,Dt){return st&&(st[ft]||st(E,O))||zt[ft].slice(0,Dt)},wt=function(st){return D.s(V%12||12,st,"0")},Rt=w.meridiem||function(st,ft,zt){var Dt=st<12?"AM":"PM";return zt?Dt.toLowerCase():Dt},Et={YY:String(this.$y).slice(-2),YYYY:this.$y,M:X+1,MM:D.s(X+1,2,"0"),MMM:ot(w.monthsShort,X,nt,3),MMMM:ot(nt,X),D:this.$D,DD:D.s(this.$D,2,"0"),d:String(this.$W),dd:ot(w.weekdaysMin,this.$W,G,2),ddd:ot(w.weekdaysShort,this.$W,G,3),dddd:G[this.$W],H:String(V),HH:D.s(V,2,"0"),h:wt(1),hh:wt(2),a:Rt(V,Y,!0),A:Rt(V,Y,!1),m:String(Y),mm:D.s(Y,2,"0"),s:String(this.$s),ss:D.s(this.$s,2,"0"),SSS:D.s(this.$ms,3,"0"),Z:C};return O.replace(y,function(st,ft){return ft||Et[st]||C.replace(":","")})},S.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},S.diff=function(v,E,w){var O,C=D.p(E),V=k(v),Y=(V.utcOffset()-this.utcOffset())*i,X=this-V,G=D.m(this,V);return G=(O={},O[f]=G/12,O[h]=G,O[d]=G/3,O[u]=(X-Y)/6048e5,O[c]=(X-Y)/864e5,O[l]=X/n,O[r]=X/i,O[a]=X/e,O)[C]||X,w?G:D.a(G)},S.daysInMonth=function(){return this.endOf(h).$D},S.$locale=function(){return R[this.$L]},S.locale=function(v,E){if(!v)return this.$L;var w=this.clone(),O=H(v,E,!0);return O&&(w.$L=O),w},S.clone=function(){return D.w(this.$d,this)},S.toDate=function(){return new Date(this.valueOf())},S.toJSON=function(){return this.isValid()?this.toISOString():null},S.toISOString=function(){return this.$d.toISOString()},S.toString=function(){return this.$d.toUTCString()},_}(),j=W.prototype;return k.prototype=j,[["$ms",s],["$s",a],["$m",r],["$H",l],["$W",c],["$M",h],["$y",f],["$D",g]].forEach(function(_){j[_[1]]=function(S){return this.$g(S,_[0],_[1])}}),k.extend=function(_,S){return _.$i||(_(S,W,k),_.$i=!0),k},k.locale=H,k.isDayjs=N,k.unix=function(_){return k(1e3*_)},k.en=R[B],k.Ls=R,k.p={},k})})(di);var kn=di.exports;class Vn{constructor(){this.moment=kn,this.cookieUtils=new Nn}isEmpty(t){return t==null||t==null||t+""==""||t=="undefined"}emptyDef(t,e){return this.isEmpty(t)?e:t}generateRandomString(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let i="";const n=e.length;for(let s=0;s<t;s++)i+=e.charAt(Math.floor(Math.random()*n));return i}getMoment(){return this.moment}isNumeric(t){return/^-?\d+$/.test(t)}formatDate(t,e="YYYY-MM-DD"){return this.moment(t).format(e)}formatDateTime(t,e="YYYY-MM-DD hh:mm:ss"){return this.moment(t).format(e)}formatDateNowTime(t,e="YYYY-MM-DD,hh:mm:ss"){const i=this.moment(new Date),n=this.moment(t),s=i.diff(n,"days"),a=e.split(",")[0].trim(),r=e.split(",")[1].trim();return s>0?this.moment(t).format(a):this.moment(t).format(r)}findTree(t,e,i="id"){if(this.isEmpty(t))return null;if(Array.isArray(t))for(let n=0;n<t.length;n++){const s=t[n];if(String(s[i])===String(e))return s;if(s.children.length>0)return this.findTree(s.children,e,i)}else if(typeof t=="object"){if(t.hasOwnProperty(i)&&t[i]==e)return t;if(t.hasOwnProperty("children"))return this.findTree(t.children,e,i)}return null}createUUID(){return On()}getCookieUtils(){return this.cookieUtils}loadJs(t){gi(t)}loadCss(t){pi(t)}paramByValue(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");const i=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(location.search);return i===null?"":decodeURIComponent(i[1].replace(/\+/g," "))}getQueryParams(){const t=document.location.href,e=t.substring(t.indexOf("?")+1).split("&");for(let i=0,n={};i<e.length;i++)e[i]=e[i].split("="),n[e[i][0]]=decodeURIComponent(e[i][1]);return result}checkHtml(t){return/<(?=.*? .*?\/ ?>|br|hr|input|!--|wbr)[a-z]+.*?>|<([a-z]+).*?<\/\1>/i.test(t)}clearHtml(t){const e=/(<([^>]+)>)/gi;return t.replace(e,"")}getBodyHtml(t){const e=t.indexOf("<body>"),i=t.indexOf("</body>");return e>=0&&i>5?t.substring(e+6,i):t}formatBytes(t,e=2){return Rn(t,e)}byteToUnit(t){var e=t;return e<1024?`${e}B`:(e/=1024,e<1024?`${e}KB`:(e/=1024,`${e}MB`))}}const fe=new Vn;function gi(o){return new Promise((t,e)=>{const i=document.querySelector('script[src="'+o+'"]');if(i==null||i==null){console.log("js loadding==",o);const n=document.createElement("script");n.addEventListener("load",()=>{t({result:1,data:o})}),n.addEventListener("error",()=>{e(new Error(`Error loading ${o}`))}),n.src=o,document.head.appendChild(n)}else console.log("js has==",o),t({result:1,data:o})})}function pi(o){return new Promise((t,e)=>{const i=document.querySelector('link[href="'+o+'"]');if(i==null||i==null){console.log("css loadding==",o);const n=document.createElement("link");n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.addEventListener("load",()=>{t({result:1,data:o})}),n.addEventListener("error",()=>{e(new Error(`Error loading ${o}`))}),n.href=o,document.head.appendChild(n)}else console.log("css has==",o),t({result:1,data:o})})}function Rn(o,t=2){if(o===0)return"0 Bytes";const e=1024,i=t<0?0:t,n=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],s=Math.floor(Math.log(o)/Math.log(e));return parseFloat((o/Math.pow(e,s)).toFixed(i))+" "+n[s]}function rt(){}function mi(o,t){for(const e in t)o[e]=t[e];return o}function yi(o){return o()}function bi(){return Object.create(null)}function Wt(o){o.forEach(yi)}function Dn(o){return typeof o=="function"}function ie(o,t){return o!=o?t==t:o!==t||o&&typeof o=="object"||typeof o=="function"}function In(o){return Object.keys(o).length===0}function Ln(o,...t){if(o==null)return rt;const e=o.subscribe(...t);return e.unsubscribe?()=>e.unsubscribe():e}function Bn(o,t,e){o.$$.on_destroy.push(Ln(t,e))}function vi(o){const t={};for(const e in o)e[0]!=="$"&&(t[e]=o[e]);return t}function xi(o,t,e){return o.set(e),t}let de=!1;function Fn(){de=!0}function Un(){de=!1}function zn(o,t,e,i){for(;o<t;){const n=o+(t-o>>1);e(n)<=i?o=n+1:t=n}return o}function $n(o){if(o.hydrate_init)return;o.hydrate_init=!0;let t=o.childNodes;if(o.nodeName==="HEAD"){const l=[];for(let c=0;c<t.length;c++){const u=t[c];u.claim_order!==void 0&&l.push(u)}t=l}const e=new Int32Array(t.length+1),i=new Int32Array(t.length);e[0]=-1;let n=0;for(let l=0;l<t.length;l++){const c=t[l].claim_order,u=(n>0&&t[e[n]].claim_order<=c?n+1:zn(1,n,d=>t[e[d]].claim_order,c))-1;i[l]=e[u]+1;const h=u+1;e[h]=l,n=Math.max(h,n)}const s=[],a=[];let r=t.length-1;for(let l=e[n]+1;l!=0;l=i[l-1]){for(s.push(t[l-1]);r>=l;r--)a.push(t[r]);r--}for(;r>=0;r--)a.push(t[r]);s.reverse(),a.sort((l,c)=>l.claim_order-c.claim_order);for(let l=0,c=0;l<a.length;l++){for(;c<s.length&&a[l].claim_order>=s[c].claim_order;)c++;const u=c<s.length?s[c]:null;o.insertBefore(a[l],u)}}function I(o,t){if(de){for($n(o),(o.actual_end_child===void 0||o.actual_end_child!==null&&o.actual_end_child.parentElement!==o)&&(o.actual_end_child=o.firstChild);o.actual_end_child!==null&&o.actual_end_child.claim_order===void 0;)o.actual_end_child=o.actual_end_child.nextSibling;t!==o.actual_end_child?(t.claim_order!==void 0||t.parentNode!==o)&&o.insertBefore(t,o.actual_end_child):o.actual_end_child=t.nextSibling}else(t.parentNode!==o||t.nextSibling!==null)&&o.appendChild(t)}function at(o,t,e){de&&!e?I(o,t):(t.parentNode!==o||t.nextSibling!=e)&&o.insertBefore(t,e||null)}function M(o){o.parentNode.removeChild(o)}function Hn(o,t){for(let e=0;e<o.length;e+=1)o[e]&&o[e].d(t)}function F(o){return document.createElement(o)}function Mt(o){return document.createTextNode(o)}function gt(){return Mt(" ")}function wi(){return Mt("")}function Pt(o,t,e,i){return o.addEventListener(t,e,i),()=>o.removeEventListener(t,e,i)}function z(o,t,e){e==null?o.removeAttribute(t):o.getAttribute(t)!==e&&o.setAttribute(t,e)}function U(o){return Array.from(o.childNodes)}function Yn(o){o.claim_info===void 0&&(o.claim_info={last_index:0,total_claimed:0})}function Si(o,t,e,i,n=!1){Yn(o);const s=(()=>{for(let a=o.claim_info.last_index;a<o.length;a++){const r=o[a];if(t(r)){const l=e(r);return l===void 0?o.splice(a,1):o[a]=l,n||(o.claim_info.last_index=a),r}}for(let a=o.claim_info.last_index-1;a>=0;a--){const r=o[a];if(t(r)){const l=e(r);return l===void 0?o.splice(a,1):o[a]=l,n?l===void 0&&o.claim_info.last_index--:o.claim_info.last_index=a,r}}return i()})();return s.claim_order=o.claim_info.total_claimed,o.claim_info.total_claimed+=1,s}function Xn(o,t,e,i){return Si(o,n=>n.nodeName===t,n=>{const s=[];for(let a=0;a<n.attributes.length;a++){const r=n.attributes[a];e[r.name]||s.push(r.name)}s.forEach(a=>n.removeAttribute(a))},()=>i(t))}function $(o,t,e){return Xn(o,t,e,F)}function qt(o,t){return Si(o,e=>e.nodeType===3,e=>{const i=""+t;if(e.data.startsWith(i)){if(e.data.length!==i.length)return e.splitText(i.length)}else e.data=i},()=>Mt(t),!0)}function pt(o){return qt(o," ")}function Ti(o,t){t=""+t,o.wholeText!==t&&(o.data=t)}function Ai(o,t){o.value=t==null?"":t}function Be(o,t,e,i){e===null?o.style.removeProperty(t):o.style.setProperty(t,e,i?"important":"")}function Ci(o,t){for(let e=0;e<o.options.length;e+=1){const i=o.options[e];if(i.__value===t){i.selected=!0;return}}o.selectedIndex=-1}function Ot(o,t,e){o.classList[e?"add":"remove"](t)}let ne;function se(o){ne=o}function Ei(){if(!ne)throw new Error("Function called outside component initialization");return ne}function ge(o){Ei().$$.on_mount.push(o)}function _i(o){Ei().$$.on_destroy.push(o)}const re=[],Mi=[],pe=[],Pi=[],Wn=Promise.resolve();let Fe=!1;function qn(){Fe||(Fe=!0,Wn.then(Oi))}function Ue(o){pe.push(o)}const ze=new Set;let me=0;function Oi(){const o=ne;do{for(;me<re.length;){const t=re[me];me++,se(t),Gn(t.$$)}for(se(null),re.length=0,me=0;Mi.length;)Mi.pop()();for(let t=0;t<pe.length;t+=1){const e=pe[t];ze.has(e)||(ze.add(e),e())}pe.length=0}while(re.length);for(;Pi.length;)Pi.pop()();Fe=!1,ze.clear(),se(o)}function Gn(o){if(o.fragment!==null){o.update(),Wt(o.before_update);const t=o.dirty;o.dirty=[-1],o.fragment&&o.fragment.p(o.ctx,t),o.after_update.forEach(Ue)}}const ye=new Set;let It;function Qn(){It={r:0,c:[],p:It}}function jn(){It.r||Wt(It.c),It=It.p}function Gt(o,t){o&&o.i&&(ye.delete(o),o.i(t))}function oe(o,t,e,i){if(o&&o.o){if(ye.has(o))return;ye.add(o),It.c.push(()=>{ye.delete(o),i&&(e&&o.d(1),i())}),o.o(t)}}function $e(o){o&&o.c()}function He(o,t){o&&o.l(t)}function be(o,t,e,i){const{fragment:n,on_mount:s,on_destroy:a,after_update:r}=o.$$;n&&n.m(t,e),i||Ue(()=>{const l=s.map(yi).filter(Dn);a?a.push(...l):Wt(l),o.$$.on_mount=[]}),r.forEach(Ue)}function ve(o,t){const e=o.$$;e.fragment!==null&&(Wt(e.on_destroy),e.fragment&&e.fragment.d(t),e.on_destroy=e.fragment=null,e.ctx=[])}function Zn(o,t){o.$$.dirty[0]===-1&&(re.push(o),qn(),o.$$.dirty.fill(0)),o.$$.dirty[t/31|0]|=1<<t%31}function xe(o,t,e,i,n,s,a,r=[-1]){const l=ne;se(o);const c=o.$$={fragment:null,ctx:null,props:s,update:rt,not_equal:n,bound:bi(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:bi(),dirty:r,skip_bound:!1,root:t.target||l.$$.root};a&&a(c.root);let u=!1;if(c.ctx=e?e(o,t.props||{},(h,d,...f)=>{const g=f.length?f[0]:d;return c.ctx&&n(c.ctx[h],c.ctx[h]=g)&&(!c.skip_bound&&c.bound[h]&&c.bound[h](g),u&&Zn(o,h)),d}):[],c.update(),u=!0,Wt(c.before_update),c.fragment=i?i(c.ctx):!1,t.target){if(t.hydrate){Fn();const h=U(t.target);c.fragment&&c.fragment.l(h),h.forEach(M)}else c.fragment&&c.fragment.c();t.intro&&Gt(o.$$.fragment),be(o,t.target,t.anchor,t.customElement),Un(),Oi()}se(l)}class we{$destroy(){ve(this,1),this.$destroy=rt}$on(t,e){const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(e),()=>{const n=i.indexOf(e);n!==-1&&i.splice(n,1)}}$set(t){this.$$set&&!In(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Qt=[];function Kn(o,t=rt){let e;const i=new Set;function n(r){if(ie(o,r)&&(o=r,e)){const l=!Qt.length;for(const c of i)c[1](),Qt.push(c,o);if(l){for(let c=0;c<Qt.length;c+=2)Qt[c][0](Qt[c+1]);Qt.length=0}}}function s(r){n(r(o))}function a(r,l=rt){const c=[r,l];return i.add(c),i.size===1&&(e=t(n)||rt),r(o),()=>{i.delete(c),i.size===0&&(e(),e=null)}}return{set:n,update:s,subscribe:a}}class Jn{constructor(){this.codeReader=null,this.listVideoInputDevices=[],this.activeDeviceId=null,this.globalProps={}}async initStore(t){if(this.globalProps=t,this.codeReader==null&&(this.codeReader=new ZXing.BrowserMultiFormatReader),this.activeDeviceId==null){const e=await this.codeReader.listVideoInputDevices();if(e!=null&&(this.listVideoInputDevices=e),this.listVideoInputDevices.length>0)return this.activeDeviceId=this.listVideoInputDevices[0].deviceId,this.listVideoInputDevices.forEach(i=>{i.type="front",i.label.toLowerCase().indexOf("back")>=0&&(i.type="back",this.activeDeviceId=i.deviceId)}),{result:1,data:this.activeDeviceId}}else return{result:1,data:this.activeDeviceId};return{result:0,data:null,message:"Video device not found"}}startVideoScan(t,e){this.codeReader.decodeFromVideoDevice(this.activeDeviceId,t,(i,n)=>{e(i,n),i&&console.log(i),n&&!(n instanceof ZXing.NotFoundException)&&console.error(n)})}resetCodeReader(){this.codeReader!=null&&this.codeReader!=null&&this.codeReader.reset()}activeDeviceInfo(){return this.listVideoInputDevices.find(t=>t.deviceId===this.activeDeviceId)}findPropsValue(t,e){return this.globalProps[t]!=null?this.globalProps[t]:e}resultCallback(t,e,i,n=""){this.globalProps.callback!=null&&this.globalProps.callback({type:t,result:e,data:i,message:n})}}class ts{constructor(){this.globalProps={}}initStore(t){return this.globalProps=t,{result:1,data:!0}}resultCallback(t,e,i,n=""){this.globalProps.callback!=null&&this.globalProps.callback({type:t,result:e,data:i,message:n})}}let Ye=Kn(null);const K=new Jn,Ni=new ts;function ki(o,t,e){const i=o.slice();return i[7]=t[e],i}function es(o){let t,e,i,n,s,a;return{c(){t=F("div"),e=F("p"),i=F("i"),n=gt(),s=F("p"),a=Mt("Video device not found"),this.h()},l(r){t=$(r,"DIV",{class:!0});var l=U(t);e=$(l,"P",{});var c=U(e);i=$(c,"I",{class:!0}),U(i).forEach(M),c.forEach(M),n=pt(l),s=$(l,"P",{class:!0});var u=U(s);a=qt(u,"Video device not found"),u.forEach(M),l.forEach(M),this.h()},h(){z(i,"class","xi-warning"),z(s,"class","message"),z(t,"class","scan-area notfound")},m(r,l){at(r,t,l),I(t,e),I(e,i),I(t,n),I(t,s),I(s,a)},p:rt,d(r){r&&M(t)}}}function is(o){let t,e,i,n,s,a,r=o[1]!=null&&o[1]!=""&&Vi(o);function l(h,d){return d&1&&(a=null),a==null&&(a=!h[0].findPropsValue("autoStart",!1)),a?ss:ns}let c=l(o,-1),u=c(o);return{c(){t=F("div"),e=F("video"),i=gt(),r&&r.c(),n=gt(),s=F("div"),u.c(),this.h()},l(h){t=$(h,"DIV",{class:!0});var d=U(t);e=$(d,"VIDEO",{id:!0}),U(e).forEach(M),i=pt(d),r&&r.l(d),n=pt(d),s=$(d,"DIV",{class:!0});var f=U(s);u.l(f),f.forEach(M),d.forEach(M),this.h()},h(){z(e,"id","scan-video"),z(s,"class","controll-btn"),z(t,"class","scan-area")},m(h,d){at(h,t,d),I(t,e),I(t,i),r&&r.m(t,null),I(t,n),I(t,s),u.m(s,null)},p(h,d){h[1]!=null&&h[1]!=""?r?r.p(h,d):(r=Vi(h),r.c(),r.m(t,n)):r&&(r.d(1),r=null),c===(c=l(h,d))&&u?u.p(h,d):(u.d(1),u=c(h),u&&(u.c(),u.m(s,null)))},d(h){h&&M(t),r&&r.d(),u.d()}}}function Vi(o){let t,e;return{c(){t=F("div"),e=Mt(o[1]),this.h()},l(i){t=$(i,"DIV",{class:!0});var n=U(t);e=qt(n,o[1]),n.forEach(M),this.h()},h(){z(t,"class","result-message")},m(i,n){at(i,t,n),I(t,e)},p(i,n){n&2&&Ti(e,i[1])},d(i){i&&M(t)}}}function ns(o){let t,e,i,n;return{c(){t=F("button"),e=F("i"),this.h()},l(s){t=$(s,"BUTTON",{type:!0,class:!0});var a=U(t);e=$(a,"I",{class:!0}),U(e).forEach(M),a.forEach(M),this.h()},h(){z(e,"class","xi-refresh"),z(t,"type","button"),z(t,"class","reset-btn")},m(s,a){at(s,t,a),I(t,e),i||(n=Pt(t,"click",o[5]),i=!0)},p:rt,d(s){s&&M(t),i=!1,n()}}}function ss(o){let t;function e(s,a){return s[2]?os:rs}let i=e(o),n=i(o);return{c(){n.c(),t=wi()},l(s){n.l(s),t=wi()},m(s,a){n.m(s,a),at(s,t,a)},p(s,a){i===(i=e(s))&&n?n.p(s,a):(n.d(1),n=i(s),n&&(n.c(),n.m(t.parentNode,t)))},d(s){n.d(s),s&&M(t)}}}function rs(o){let t,e,i,n;return{c(){t=F("button"),e=F("i"),this.h()},l(s){t=$(s,"BUTTON",{type:!0,class:!0});var a=U(t);e=$(a,"I",{class:!0}),U(e).forEach(M),a.forEach(M),this.h()},h(){z(e,"class","xi-focus-center"),z(t,"type","button"),z(t,"class","start-btn")},m(s,a){at(s,t,a),I(t,e),i||(n=Pt(t,"click",o[4]),i=!0)},p:rt,d(s){s&&M(t),i=!1,n()}}}function os(o){let t,e,i,n;function s(l,c){return c&1&&(e=null),e==null&&(e=!!l[0].findPropsValue("autoStart",!1)),e?ls:as}let a=s(o,-1),r=a(o);return{c(){t=F("button"),r.c(),this.h()},l(l){t=$(l,"BUTTON",{type:!0,class:!0});var c=U(t);r.l(c),c.forEach(M),this.h()},h(){z(t,"type","button"),z(t,"class","reset-btn")},m(l,c){at(l,t,c),r.m(t,null),i||(n=Pt(t,"click",o[5]),i=!0)},p(l,c){a!==(a=s(l,c))&&(r.d(1),r=a(l),r&&(r.c(),r.m(t,null)))},d(l){l&&M(t),r.d(),i=!1,n()}}}function as(o){let t;return{c(){t=F("i"),this.h()},l(e){t=$(e,"I",{class:!0}),U(t).forEach(M),this.h()},h(){z(t,"class","xi-recording-stop")},m(e,i){at(e,t,i)},d(e){e&&M(t)}}}function ls(o){let t;return{c(){t=F("i"),this.h()},l(e){t=$(e,"I",{class:!0}),U(t).forEach(M),this.h()},h(){z(t,"class","xi-refresh")},m(e,i){at(e,t,i)},d(e){e&&M(t)}}}function Ri(o){let t,e,i,n,s,a=o[0].listVideoInputDevices,r=[];for(let l=0;l<a.length;l+=1)r[l]=Di(ki(o,a,l));return{c(){t=F("div"),e=F("select");for(let l=0;l<r.length;l+=1)r[l].c();this.h()},l(l){t=$(l,"DIV",{class:!0});var c=U(t);e=$(c,"SELECT",{});var u=U(e);for(let h=0;h<r.length;h+=1)r[h].l(u);u.forEach(M),c.forEach(M),this.h()},h(){z(t,"class","divice-select")},m(l,c){at(l,t,c),I(t,e);for(let u=0;u<r.length;u+=1)r[u].m(e,null);Ci(e,o[0].activeDeviceId),n||(s=Pt(e,"change",o[6]),n=!0)},p(l,c){if(c&1){a=l[0].listVideoInputDevices;let u;for(u=0;u<a.length;u+=1){const h=ki(l,a,u);r[u]?r[u].p(h,c):(r[u]=Di(h),r[u].c(),r[u].m(e,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=a.length}c&1&&i!==(i=l[0].activeDeviceId)&&Ci(e,l[0].activeDeviceId)},d(l){l&&M(t),Hn(r,l),n=!1,s()}}}function Di(o){let t,e=o[7].label+"",i,n;return{c(){t=F("option"),i=Mt(e),this.h()},l(s){t=$(s,"OPTION",{});var a=U(t);i=qt(a,e),a.forEach(M),this.h()},h(){t.__value=n=o[7].deviceId,t.value=t.__value},m(s,a){at(s,t,a),I(t,i)},p(s,a){a&1&&e!==(e=s[7].label+"")&&Ti(i,e),a&1&&n!==(n=s[7].deviceId)&&(t.__value=n,t.value=t.__value)},d(s){s&&M(t)}}}function cs(o){let t,e,i,n,s,a,r,l,c,u,h;function d(m,y){return m[0].activeDeviceId!=null&&m[0].activeDeviceId!=null&&m[0].activeDeviceId!=""?is:es}let f=d(o),g=f(o),p=o[0].listVideoInputDevices.length>1&&Ri(o);return{c(){t=F("section"),e=F("div"),g.c(),i=gt(),n=F("div"),s=gt(),a=F("div"),r=gt(),l=F("div"),c=gt(),u=F("div"),h=gt(),p&&p.c(),this.h()},l(m){t=$(m,"SECTION",{class:!0});var y=U(t);e=$(y,"DIV",{class:!0});var T=U(e);g.l(T),i=pt(T),n=$(T,"DIV",{class:!0}),U(n).forEach(M),s=pt(T),a=$(T,"DIV",{class:!0}),U(a).forEach(M),r=pt(T),l=$(T,"DIV",{class:!0}),U(l).forEach(M),c=pt(T),u=$(T,"DIV",{class:!0}),U(u).forEach(M),T.forEach(M),h=pt(y),p&&p.l(y),y.forEach(M),this.h()},h(){z(n,"class","rect-border topleft"),Ot(n,"hitcode",o[3]!=null),z(a,"class","rect-border topright"),Ot(a,"hitcode",o[3]!=null),z(l,"class","rect-border bottomleft"),Ot(l,"hitcode",o[3]!=null),z(u,"class","rect-border bottomright"),Ot(u,"hitcode",o[3]!=null),z(e,"class","scan-outer"),z(t,"class","reader-section")},m(m,y){at(m,t,y),I(t,e),g.m(e,null),I(e,i),I(e,n),I(e,s),I(e,a),I(e,r),I(e,l),I(e,c),I(e,u),I(t,h),p&&p.m(t,null)},p(m,[y]){f===(f=d(m))&&g?g.p(m,y):(g.d(1),g=f(m),g&&(g.c(),g.m(e,i))),y&8&&Ot(n,"hitcode",m[3]!=null),y&8&&Ot(a,"hitcode",m[3]!=null),y&8&&Ot(l,"hitcode",m[3]!=null),y&8&&Ot(u,"hitcode",m[3]!=null),m[0].listVideoInputDevices.length>1?p?p.p(m,y):(p=Ri(m),p.c(),p.m(t,null)):p&&(p.d(1),p=null)},i:rt,o:rt,d(m){m&&M(t),g.d(),p&&p.d()}}}function us(o,t,e){let i="",n=!1,s=null;const a=()=>{e(1,i=""),e(3,s=null),K.resultCallback("startScan",1,K.activeDeviceId,""),K.startVideoScan("scan-video",(c,u)=>{e(2,n=!0),c&&(e(1,i=c.text),e(3,s=c),i!=null&&i!=null&&i!=""&&(document.getElementById("scan-video").pause(),e(3,s.formatText=ZXing.BarcodeFormat[parseInt(s.format)],s)),K.resultCallback("ScanResult",1,s,"")),u&&!(u instanceof ZXing.NotFoundException)&&(K.resultCallback("ScanResult",0,u,""),e(3,s=null))})},r=()=>{e(2,n=!1),e(3,s=null),K.resetCodeReader(),e(1,i=""),K.resultCallback("resetScan",1,"reset",""),K.findPropsValue("autoStart",!1)&&a()},l=c=>{e(0,K.activeDeviceId=c.target.value,K),r();const u=K.activeDeviceInfo();let h=u!=null&&u!=""?1:0;K.resultCallback("deviceChange",h,u,""),a()};return ge(async()=>{K.findPropsValue("autoStart",!1)&&a()}),_i(async()=>{K.resultCallback("ScanVideo",1,"Destroy",""),K.resetCodeReader()}),[K,i,n,s,a,r,l]}class hs extends we{constructor(t){super();xe(this,t,us,cs,ie,{})}}var Ii={exports:{}};(function(o,t){(function(e,i){i()})(_t,function(){function e(c,u){return typeof u=="undefined"?u={autoBom:!1}:typeof u!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(c.type)?new Blob(["\uFEFF",c],{type:c.type}):c}function i(c,u,h){var d=new XMLHttpRequest;d.open("GET",c),d.responseType="blob",d.onload=function(){l(d.response,u,h)},d.onerror=function(){console.error("could not download file")},d.send()}function n(c){var u=new XMLHttpRequest;u.open("HEAD",c,!1);try{u.send()}catch{}return 200<=u.status&&299>=u.status}function s(c){try{c.dispatchEvent(new MouseEvent("click"))}catch{var u=document.createEvent("MouseEvents");u.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),c.dispatchEvent(u)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof _t=="object"&&_t.global===_t?_t:void 0,r=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!r?function(c,u,h){var d=a.URL||a.webkitURL,f=document.createElement("a");u=u||c.name||"download",f.download=u,f.rel="noopener",typeof c=="string"?(f.href=c,f.origin===location.origin?s(f):n(f.href)?i(c,u,h):s(f,f.target="_blank")):(f.href=d.createObjectURL(c),setTimeout(function(){d.revokeObjectURL(f.href)},4e4),setTimeout(function(){s(f)},0))}:"msSaveOrOpenBlob"in navigator?function(c,u,h){if(u=u||c.name||"download",typeof c!="string")navigator.msSaveOrOpenBlob(e(c,h),u);else if(n(c))i(c,u,h);else{var d=document.createElement("a");d.href=c,d.target="_blank",setTimeout(function(){s(d)})}}:function(c,u,h,d){if(d=d||open("","_blank"),d&&(d.document.title=d.document.body.innerText="downloading..."),typeof c=="string")return i(c,u,h);var f=c.type==="application/octet-stream",g=/constructor/i.test(a.HTMLElement)||a.safari,p=/CriOS\/[\d]+/.test(navigator.userAgent);if((p||f&&g||r)&&typeof FileReader!="undefined"){var m=new FileReader;m.onloadend=function(){var x=m.result;x=p?x:x.replace(/^data:[^;]*;/,"data:attachment/file;"),d?d.location.href=x:location=x,d=null},m.readAsDataURL(c)}else{var y=a.URL||a.webkitURL,T=y.createObjectURL(c);d?d.location=T:location.href=T,d=null,setTimeout(function(){y.revokeObjectURL(T)},4e4)}});a.saveAs=l.saveAs=l,o.exports=l})})(Ii);function fs(o){let t,e,i,n,s,a,r,l,c,u,h,d,f,g,p,m,y,T,x,A,B,R,N;return{c(){t=F("section"),e=F("div"),i=F("textarea"),n=gt(),s=F("div"),a=F("button"),r=F("i"),l=Mt(" \uC0DD\uC131"),u=gt(),h=F("button"),d=F("i"),f=Mt(" \uB2E4\uC6B4\uB85C\uB4DC"),p=gt(),m=F("button"),y=F("i"),T=gt(),x=F("div"),A=F("pre"),B=F("code"),this.h()},l(H){t=$(H,"SECTION",{class:!0});var k=U(t);e=$(k,"DIV",{class:!0});var D=U(e);i=$(D,"TEXTAREA",{placeholder:!0}),U(i).forEach(M),D.forEach(M),n=pt(k),s=$(k,"DIV",{class:!0});var W=U(s);a=$(W,"BUTTON",{type:!0,class:!0});var j=U(a);r=$(j,"I",{class:!0}),U(r).forEach(M),l=qt(j," \uC0DD\uC131"),j.forEach(M),u=pt(W),h=$(W,"BUTTON",{type:!0,class:!0});var _=U(h);d=$(_,"I",{class:!0}),U(d).forEach(M),f=qt(_," \uB2E4\uC6B4\uB85C\uB4DC"),_.forEach(M),p=pt(W),m=$(W,"BUTTON",{class:!0});var S=U(m);y=$(S,"I",{class:!0}),U(y).forEach(M),S.forEach(M),W.forEach(M),T=pt(k),x=$(k,"DIV",{class:!0});var v=U(x);A=$(v,"PRE",{});var E=U(A);B=$(E,"CODE",{id:!0}),U(B).forEach(M),E.forEach(M),v.forEach(M),k.forEach(M),this.h()},h(){z(i,"placeholder","\uC0DD\uC131\uD55C \uB0B4\uC6A9"),z(e,"class","form-field py-input"),z(r,"class","xi-qr-code"),a.disabled=c=o[0]=="",z(a,"type","btn"),z(a,"class","py-btn info"),z(d,"class","xi-cloud-download-o"),h.disabled=g=o[1]==0,z(h,"type","btn"),z(h,"class","py-btn primary"),z(y,"class","xi-trash"),z(m,"class","delete-code py-btn-icon"),z(s,"class","form-field text-center btns"),z(B,"id","code-result"),z(x,"class","form-field text-center result-area"),z(t,"class","write-section")},m(H,k){at(H,t,k),I(t,e),I(e,i),Ai(i,o[0]),I(t,n),I(t,s),I(s,a),I(a,r),I(a,l),I(s,u),I(s,h),I(h,d),I(h,f),I(s,p),I(s,m),I(m,y),I(t,T),I(t,x),I(x,A),I(A,B),R||(N=[Pt(i,"input",o[5]),Pt(a,"click",o[2]),Pt(h,"click",o[3]),Pt(m,"click",o[4])],R=!0)},p(H,[k]){k&1&&Ai(i,H[0]),k&1&&c!==(c=H[0]=="")&&(a.disabled=c),k&2&&g!==(g=H[1]==0)&&(h.disabled=g)},i:rt,o:rt,d(H){H&&M(t),R=!1,Wt(N)}}}function ds(o,t,e){let i="",n,s=0;const a=()=>{n.writeToDom("#code-result",i,300,300),e(1,s++,s)},r=()=>{const u=new XMLSerializer().serializeToString(document.getElementById("code-result")),h=new Blob([u]);Ii.exports.saveAs(h,`qrcode-${new Date().getTime()}.svg`)},l=()=>{confirm("\uC0DD\uC131\uB41C \uCF54\uB4DC\uB97C \uC0AD\uC81C\uD569\uB2C8\uAE4C?")&&(e(1,s=0),document.getElementById("code-result").innerHTML="")};ge(async()=>{n=new ZXing.BrowserQRCodeSvgWriter});function c(){i=this.value,e(0,i)}return[i,s,a,r,l,c]}class gs extends we{constructor(t){super();xe(this,t,ds,fs,ie,{})}}class ps{fileExt(t){if(this.isEmpty(t))return null;const e=t.length,i=t.lastIndexOf(".");return t.substring(i+1,e)}fileName(t){if(this.isEmpty(t))return null;const e=t.lastIndexOf(".");return t.substring(0,e)}isEmpty(t){}fileTypeToNameJoin(t,e){const i=this.fileName(t);switch(e.toLowerCase()){case"image/png":return i+".png";case"image/jpeg":return i+".jpg";case"image/jpg":return i+".jpg";case"image/gif":return i+".gif";default:return i+"."+e}}dataURItoBlob(t){const e=t.split(",")[0].indexOf("base64")>=0?atob(t.split(",")[1]):unescape(t.split(",")[1]),i=t.split(",")[0].split(":")[1].split(";")[0],n=new Uint8Array(e.length);for(var s=0;s<e.length;s++)n[s]=e.charCodeAt(s);return new Blob([n],{type:i})}blobToBase64(t){return new Promise((e,i)=>{const n=new FileReader;n.onloadend=()=>e(n.result),n.readAsDataURL(t)})}}var Se={exports:{}},ae={exports:{}};(function(){var o,t,e,i,n,s;typeof performance!="undefined"&&performance!==null&&performance.now?ae.exports=function(){return performance.now()}:typeof process!="undefined"&&process!==null&&process.hrtime?(ae.exports=function(){return(o()-n)/1e6},t=process.hrtime,o=function(){var a;return a=t(),a[0]*1e9+a[1]},i=o(),s=process.uptime()*1e9,n=i-s):Date.now?(ae.exports=function(){return Date.now()-e},e=Date.now()):(ae.exports=function(){return new Date().getTime()-e},e=new Date().getTime())}).call(_t);for(var ms=ae.exports,St=typeof window=="undefined"?_t:window,Te=["moz","webkit"],jt="AnimationFrame",Zt=St["request"+jt],le=St["cancel"+jt]||St["cancelRequest"+jt],ce=0;!Zt&&ce<Te.length;ce++)Zt=St[Te[ce]+"Request"+jt],le=St[Te[ce]+"Cancel"+jt]||St[Te[ce]+"CancelRequest"+jt];if(!Zt||!le){var Xe=0,Li=0,Lt=[],ys=1e3/60;Zt=function(o){if(Lt.length===0){var t=ms(),e=Math.max(0,ys-(t-Xe));Xe=e+t,setTimeout(function(){var i=Lt.slice(0);Lt.length=0;for(var n=0;n<i.length;n++)if(!i[n].cancelled)try{i[n].callback(Xe)}catch(s){setTimeout(function(){throw s},0)}},Math.round(e))}return Lt.push({handle:++Li,callback:o,cancelled:!1}),Li},le=function(o){for(var t=0;t<Lt.length;t++)Lt[t].handle===o&&(Lt[t].cancelled=!0)}}Se.exports=function(o){return Zt.call(St,o)},Se.exports.cancel=function(){le.apply(St,arguments)},Se.exports.polyfill=function(o){o||(o=St),o.requestAnimationFrame=Zt,o.cancelAnimationFrame=le};var We=Se.exports,qe=function(o){this.ok=!1,this.alpha=1,o.charAt(0)=="#"&&(o=o.substr(1,6)),o=o.replace(/ /g,""),o=o.toLowerCase();var t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};o=t[o]||o;for(var e=[{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,example:["rgba(123, 234, 45, 0.8)","rgba(255,234,245,1.0)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3]),parseFloat(l[4])]}},{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],i=0;i<e.length;i++){var n=e[i].re,s=e[i].process,a=n.exec(o);if(a){var r=s(a);this.r=r[0],this.g=r[1],this.b=r[2],r.length>3&&(this.alpha=r[3]),this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.alpha=this.alpha<0?0:this.alpha>1||isNaN(this.alpha)?1:this.alpha,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+l+c+u},this.getHelpXML=function(){for(var l=new Array,c=0;c<e.length;c++)for(var u=e[c].example,h=0;h<u.length;h++)l[l.length]=u[h];for(var d in t)l[l.length]=d;var f=document.createElement("ul");f.setAttribute("id","rgbcolor-examples");for(var c=0;c<l.length;c++)try{var g=document.createElement("li"),p=new RGBColor(l[c]),m=document.createElement("div");m.style.cssText="margin: 3px; border: 1px solid black; background:"+p.toHex()+"; color:"+p.toHex(),m.appendChild(document.createTextNode("test"));var y=document.createTextNode(" "+l[c]+" -> "+p.toRGB()+" -> "+p.toHex());g.appendChild(m),g.appendChild(y),f.appendChild(g)}catch{}return f}};/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var Bi=function(o,t){return(Bi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,i){e.__proto__=i}||function(e,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])})(o,t)};function Fi(o,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=o}Bi(o,t),o.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function bs(o){var t="";Array.isArray(o)||(o=[o]);for(var e=0;e<o.length;e++){var i=o[e];if(i.type===b.CLOSE_PATH)t+="z";else if(i.type===b.HORIZ_LINE_TO)t+=(i.relative?"h":"H")+i.x;else if(i.type===b.VERT_LINE_TO)t+=(i.relative?"v":"V")+i.y;else if(i.type===b.MOVE_TO)t+=(i.relative?"m":"M")+i.x+" "+i.y;else if(i.type===b.LINE_TO)t+=(i.relative?"l":"L")+i.x+" "+i.y;else if(i.type===b.CURVE_TO)t+=(i.relative?"c":"C")+i.x1+" "+i.y1+" "+i.x2+" "+i.y2+" "+i.x+" "+i.y;else if(i.type===b.SMOOTH_CURVE_TO)t+=(i.relative?"s":"S")+i.x2+" "+i.y2+" "+i.x+" "+i.y;else if(i.type===b.QUAD_TO)t+=(i.relative?"q":"Q")+i.x1+" "+i.y1+" "+i.x+" "+i.y;else if(i.type===b.SMOOTH_QUAD_TO)t+=(i.relative?"t":"T")+i.x+" "+i.y;else{if(i.type!==b.ARC)throw new Error('Unexpected command type "'+i.type+'" at index '+e+".");t+=(i.relative?"a":"A")+i.rX+" "+i.rY+" "+i.xRot+" "+ +i.lArcFlag+" "+ +i.sweepFlag+" "+i.x+" "+i.y}}return t}function Ge(o,t){var e=o[0],i=o[1];return[e*Math.cos(t)-i*Math.sin(t),e*Math.sin(t)+i*Math.cos(t)]}function mt(){for(var o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];for(var e=0;e<o.length;e++)if(typeof o[e]!="number")throw new Error("assertNumbers arguments["+e+"] is not a number. "+typeof o[e]+" == typeof "+o[e]);return!0}var Nt=Math.PI;function Qe(o,t,e){o.lArcFlag=o.lArcFlag===0?0:1,o.sweepFlag=o.sweepFlag===0?0:1;var i=o.rX,n=o.rY,s=o.x,a=o.y;i=Math.abs(o.rX),n=Math.abs(o.rY);var r=Ge([(t-s)/2,(e-a)/2],-o.xRot/180*Nt),l=r[0],c=r[1],u=Math.pow(l,2)/Math.pow(i,2)+Math.pow(c,2)/Math.pow(n,2);1<u&&(i*=Math.sqrt(u),n*=Math.sqrt(u)),o.rX=i,o.rY=n;var h=Math.pow(i,2)*Math.pow(c,2)+Math.pow(n,2)*Math.pow(l,2),d=(o.lArcFlag!==o.sweepFlag?1:-1)*Math.sqrt(Math.max(0,(Math.pow(i,2)*Math.pow(n,2)-h)/h)),f=i*c/n*d,g=-n*l/i*d,p=Ge([f,g],o.xRot/180*Nt);o.cX=p[0]+(t+s)/2,o.cY=p[1]+(e+a)/2,o.phi1=Math.atan2((c-g)/n,(l-f)/i),o.phi2=Math.atan2((-c-g)/n,(-l-f)/i),o.sweepFlag===0&&o.phi2>o.phi1&&(o.phi2-=2*Nt),o.sweepFlag===1&&o.phi2<o.phi1&&(o.phi2+=2*Nt),o.phi1*=180/Nt,o.phi2*=180/Nt}function Ui(o,t,e){mt(o,t,e);var i=o*o+t*t-e*e;if(0>i)return[];if(i===0)return[[o*e/(o*o+t*t),t*e/(o*o+t*t)]];var n=Math.sqrt(i);return[[(o*e+t*n)/(o*o+t*t),(t*e-o*n)/(o*o+t*t)],[(o*e-t*n)/(o*o+t*t),(t*e+o*n)/(o*o+t*t)]]}var J,Tt=Math.PI/180;function zi(o,t,e){return(1-e)*o+e*t}function $i(o,t,e,i){return o+Math.cos(i/180*Nt)*t+Math.sin(i/180*Nt)*e}function Hi(o,t,e,i){var n=1e-6,s=t-o,a=e-t,r=3*s+3*(i-e)-6*a,l=6*(a-s),c=3*s;return Math.abs(r)<n?[-c/l]:function(u,h,d){d===void 0&&(d=1e-6);var f=u*u/4-h;if(f<-d)return[];if(f<=d)return[-u/2];var g=Math.sqrt(f);return[-u/2-g,-u/2+g]}(l/r,c/r,n)}function Yi(o,t,e,i,n){var s=1-n;return o*(s*s*s)+t*(3*s*s*n)+e*(3*s*n*n)+i*(n*n*n)}(function(o){function t(){return n(function(r,l,c){return r.relative&&(r.x1!==void 0&&(r.x1+=l),r.y1!==void 0&&(r.y1+=c),r.x2!==void 0&&(r.x2+=l),r.y2!==void 0&&(r.y2+=c),r.x!==void 0&&(r.x+=l),r.y!==void 0&&(r.y+=c),r.relative=!1),r})}function e(){var r=NaN,l=NaN,c=NaN,u=NaN;return n(function(h,d,f){return h.type&b.SMOOTH_CURVE_TO&&(h.type=b.CURVE_TO,r=isNaN(r)?d:r,l=isNaN(l)?f:l,h.x1=h.relative?d-r:2*d-r,h.y1=h.relative?f-l:2*f-l),h.type&b.CURVE_TO?(r=h.relative?d+h.x2:h.x2,l=h.relative?f+h.y2:h.y2):(r=NaN,l=NaN),h.type&b.SMOOTH_QUAD_TO&&(h.type=b.QUAD_TO,c=isNaN(c)?d:c,u=isNaN(u)?f:u,h.x1=h.relative?d-c:2*d-c,h.y1=h.relative?f-u:2*f-u),h.type&b.QUAD_TO?(c=h.relative?d+h.x1:h.x1,u=h.relative?f+h.y1:h.y1):(c=NaN,u=NaN),h})}function i(){var r=NaN,l=NaN;return n(function(c,u,h){if(c.type&b.SMOOTH_QUAD_TO&&(c.type=b.QUAD_TO,r=isNaN(r)?u:r,l=isNaN(l)?h:l,c.x1=c.relative?u-r:2*u-r,c.y1=c.relative?h-l:2*h-l),c.type&b.QUAD_TO){r=c.relative?u+c.x1:c.x1,l=c.relative?h+c.y1:c.y1;var d=c.x1,f=c.y1;c.type=b.CURVE_TO,c.x1=((c.relative?0:u)+2*d)/3,c.y1=((c.relative?0:h)+2*f)/3,c.x2=(c.x+2*d)/3,c.y2=(c.y+2*f)/3}else r=NaN,l=NaN;return c})}function n(r){var l=0,c=0,u=NaN,h=NaN;return function(d){if(isNaN(u)&&!(d.type&b.MOVE_TO))throw new Error("path must start with moveto");var f=r(d,l,c,u,h);return d.type&b.CLOSE_PATH&&(l=u,c=h),d.x!==void 0&&(l=d.relative?l+d.x:d.x),d.y!==void 0&&(c=d.relative?c+d.y:d.y),d.type&b.MOVE_TO&&(u=l,h=c),f}}function s(r,l,c,u,h,d){return mt(r,l,c,u,h,d),n(function(f,g,p,m){var y=f.x1,T=f.x2,x=f.relative&&!isNaN(m),A=f.x!==void 0?f.x:x?0:g,B=f.y!==void 0?f.y:x?0:p;function R(X){return X*X}f.type&b.HORIZ_LINE_TO&&l!==0&&(f.type=b.LINE_TO,f.y=f.relative?0:p),f.type&b.VERT_LINE_TO&&c!==0&&(f.type=b.LINE_TO,f.x=f.relative?0:g),f.x!==void 0&&(f.x=f.x*r+B*c+(x?0:h)),f.y!==void 0&&(f.y=A*l+f.y*u+(x?0:d)),f.x1!==void 0&&(f.x1=f.x1*r+f.y1*c+(x?0:h)),f.y1!==void 0&&(f.y1=y*l+f.y1*u+(x?0:d)),f.x2!==void 0&&(f.x2=f.x2*r+f.y2*c+(x?0:h)),f.y2!==void 0&&(f.y2=T*l+f.y2*u+(x?0:d));var N=r*u-l*c;if(f.xRot!==void 0&&(r!==1||l!==0||c!==0||u!==1))if(N===0)delete f.rX,delete f.rY,delete f.xRot,delete f.lArcFlag,delete f.sweepFlag,f.type=b.LINE_TO;else{var H=f.xRot*Math.PI/180,k=Math.sin(H),D=Math.cos(H),W=1/R(f.rX),j=1/R(f.rY),_=R(D)*W+R(k)*j,S=2*k*D*(W-j),v=R(k)*W+R(D)*j,E=_*u*u-S*l*u+v*l*l,w=S*(r*u+l*c)-2*(_*c*u+v*r*l),O=_*c*c-S*r*c+v*r*r,C=(Math.atan2(w,E-O)+Math.PI)%Math.PI/2,V=Math.sin(C),Y=Math.cos(C);f.rX=Math.abs(N)/Math.sqrt(E*R(Y)+w*V*Y+O*R(V)),f.rY=Math.abs(N)/Math.sqrt(E*R(V)-w*V*Y+O*R(Y)),f.xRot=180*C/Math.PI}return f.sweepFlag!==void 0&&0>N&&(f.sweepFlag=+!f.sweepFlag),f})}function a(){return function(r){var l={};for(var c in r)l[c]=r[c];return l}}o.ROUND=function(r){function l(c){return Math.round(c*r)/r}return r===void 0&&(r=1e13),mt(r),function(c){return c.x1!==void 0&&(c.x1=l(c.x1)),c.y1!==void 0&&(c.y1=l(c.y1)),c.x2!==void 0&&(c.x2=l(c.x2)),c.y2!==void 0&&(c.y2=l(c.y2)),c.x!==void 0&&(c.x=l(c.x)),c.y!==void 0&&(c.y=l(c.y)),c.rX!==void 0&&(c.rX=l(c.rX)),c.rY!==void 0&&(c.rY=l(c.rY)),c}},o.TO_ABS=t,o.TO_REL=function(){return n(function(r,l,c){return r.relative||(r.x1!==void 0&&(r.x1-=l),r.y1!==void 0&&(r.y1-=c),r.x2!==void 0&&(r.x2-=l),r.y2!==void 0&&(r.y2-=c),r.x!==void 0&&(r.x-=l),r.y!==void 0&&(r.y-=c),r.relative=!0),r})},o.NORMALIZE_HVZ=function(r,l,c){return r===void 0&&(r=!0),l===void 0&&(l=!0),c===void 0&&(c=!0),n(function(u,h,d,f,g){if(isNaN(f)&&!(u.type&b.MOVE_TO))throw new Error("path must start with moveto");return l&&u.type&b.HORIZ_LINE_TO&&(u.type=b.LINE_TO,u.y=u.relative?0:d),c&&u.type&b.VERT_LINE_TO&&(u.type=b.LINE_TO,u.x=u.relative?0:h),r&&u.type&b.CLOSE_PATH&&(u.type=b.LINE_TO,u.x=u.relative?f-h:f,u.y=u.relative?g-d:g),u.type&b.ARC&&(u.rX===0||u.rY===0)&&(u.type=b.LINE_TO,delete u.rX,delete u.rY,delete u.xRot,delete u.lArcFlag,delete u.sweepFlag),u})},o.NORMALIZE_ST=e,o.QT_TO_C=i,o.INFO=n,o.SANITIZE=function(r){r===void 0&&(r=0),mt(r);var l=NaN,c=NaN,u=NaN,h=NaN;return n(function(d,f,g,p,m){var y=Math.abs,T=!1,x=0,A=0;if(d.type&b.SMOOTH_CURVE_TO&&(x=isNaN(l)?0:f-l,A=isNaN(c)?0:g-c),d.type&(b.CURVE_TO|b.SMOOTH_CURVE_TO)?(l=d.relative?f+d.x2:d.x2,c=d.relative?g+d.y2:d.y2):(l=NaN,c=NaN),d.type&b.SMOOTH_QUAD_TO?(u=isNaN(u)?f:2*f-u,h=isNaN(h)?g:2*g-h):d.type&b.QUAD_TO?(u=d.relative?f+d.x1:d.x1,h=d.relative?g+d.y1:d.y2):(u=NaN,h=NaN),d.type&b.LINE_COMMANDS||d.type&b.ARC&&(d.rX===0||d.rY===0||!d.lArcFlag)||d.type&b.CURVE_TO||d.type&b.SMOOTH_CURVE_TO||d.type&b.QUAD_TO||d.type&b.SMOOTH_QUAD_TO){var B=d.x===void 0?0:d.relative?d.x:d.x-f,R=d.y===void 0?0:d.relative?d.y:d.y-g;x=isNaN(u)?d.x1===void 0?x:d.relative?d.x:d.x1-f:u-f,A=isNaN(h)?d.y1===void 0?A:d.relative?d.y:d.y1-g:h-g;var N=d.x2===void 0?0:d.relative?d.x:d.x2-f,H=d.y2===void 0?0:d.relative?d.y:d.y2-g;y(B)<=r&&y(R)<=r&&y(x)<=r&&y(A)<=r&&y(N)<=r&&y(H)<=r&&(T=!0)}return d.type&b.CLOSE_PATH&&y(f-p)<=r&&y(g-m)<=r&&(T=!0),T?[]:d})},o.MATRIX=s,o.ROTATE=function(r,l,c){l===void 0&&(l=0),c===void 0&&(c=0),mt(r,l,c);var u=Math.sin(r),h=Math.cos(r);return s(h,u,-u,h,l-l*h+c*u,c-l*u-c*h)},o.TRANSLATE=function(r,l){return l===void 0&&(l=0),mt(r,l),s(1,0,0,1,r,l)},o.SCALE=function(r,l){return l===void 0&&(l=r),mt(r,l),s(r,0,0,l,0,0)},o.SKEW_X=function(r){return mt(r),s(1,0,Math.atan(r),1,0,0)},o.SKEW_Y=function(r){return mt(r),s(1,Math.atan(r),0,1,0,0)},o.X_AXIS_SYMMETRY=function(r){return r===void 0&&(r=0),mt(r),s(-1,0,0,1,r,0)},o.Y_AXIS_SYMMETRY=function(r){return r===void 0&&(r=0),mt(r),s(1,0,0,-1,0,r)},o.A_TO_C=function(){return n(function(r,l,c){return b.ARC===r.type?function(u,h,d){var f,g,p,m;u.cX||Qe(u,h,d);for(var y=Math.min(u.phi1,u.phi2),T=Math.max(u.phi1,u.phi2)-y,x=Math.ceil(T/90),A=new Array(x),B=h,R=d,N=0;N<x;N++){var H=zi(u.phi1,u.phi2,N/x),k=zi(u.phi1,u.phi2,(N+1)/x),D=k-H,W=4/3*Math.tan(D*Tt/4),j=[Math.cos(H*Tt)-W*Math.sin(H*Tt),Math.sin(H*Tt)+W*Math.cos(H*Tt)],_=j[0],S=j[1],v=[Math.cos(k*Tt),Math.sin(k*Tt)],E=v[0],w=v[1],O=[E+W*Math.sin(k*Tt),w-W*Math.cos(k*Tt)],C=O[0],V=O[1];A[N]={relative:u.relative,type:b.CURVE_TO};var Y=function(X,G){var nt=Ge([X*u.rX,G*u.rY],u.xRot),ot=nt[0],wt=nt[1];return[u.cX+ot,u.cY+wt]};f=Y(_,S),A[N].x1=f[0],A[N].y1=f[1],g=Y(C,V),A[N].x2=g[0],A[N].y2=g[1],p=Y(E,w),A[N].x=p[0],A[N].y=p[1],u.relative&&(A[N].x1-=B,A[N].y1-=R,A[N].x2-=B,A[N].y2-=R,A[N].x-=B,A[N].y-=R),B=(m=[A[N].x,A[N].y])[0],R=m[1]}return A}(r,r.relative?0:l,r.relative?0:c):r})},o.ANNOTATE_ARCS=function(){return n(function(r,l,c){return r.relative&&(l=0,c=0),b.ARC===r.type&&Qe(r,l,c),r})},o.CLONE=a,o.CALCULATE_BOUNDS=function(){var r=function(d){var f={};for(var g in d)f[g]=d[g];return f},l=t(),c=i(),u=e(),h=n(function(d,f,g){var p=u(c(l(r(d))));function m(V){V>h.maxX&&(h.maxX=V),V<h.minX&&(h.minX=V)}function y(V){V>h.maxY&&(h.maxY=V),V<h.minY&&(h.minY=V)}if(p.type&b.DRAWING_COMMANDS&&(m(f),y(g)),p.type&b.HORIZ_LINE_TO&&m(p.x),p.type&b.VERT_LINE_TO&&y(p.y),p.type&b.LINE_TO&&(m(p.x),y(p.y)),p.type&b.CURVE_TO){m(p.x),y(p.y);for(var T=0,x=Hi(f,p.x1,p.x2,p.x);T<x.length;T++)0<(C=x[T])&&1>C&&m(Yi(f,p.x1,p.x2,p.x,C));for(var A=0,B=Hi(g,p.y1,p.y2,p.y);A<B.length;A++)0<(C=B[A])&&1>C&&y(Yi(g,p.y1,p.y2,p.y,C))}if(p.type&b.ARC){m(p.x),y(p.y),Qe(p,f,g);for(var R=p.xRot/180*Math.PI,N=Math.cos(R)*p.rX,H=Math.sin(R)*p.rX,k=-Math.sin(R)*p.rY,D=Math.cos(R)*p.rY,W=p.phi1<p.phi2?[p.phi1,p.phi2]:-180>p.phi2?[p.phi2+360,p.phi1+360]:[p.phi2,p.phi1],j=W[0],_=W[1],S=function(V){var Y=V[0],X=V[1],G=180*Math.atan2(X,Y)/Math.PI;return G<j?G+360:G},v=0,E=Ui(k,-N,0).map(S);v<E.length;v++)(C=E[v])>j&&C<_&&m($i(p.cX,N,k,C));for(var w=0,O=Ui(D,-H,0).map(S);w<O.length;w++){var C;(C=O[w])>j&&C<_&&y($i(p.cY,H,D,C))}}return d});return h.minX=1/0,h.maxX=-1/0,h.minY=1/0,h.maxY=-1/0,h}})(J||(J={}));var yt,Xi=function(){function o(){}return o.prototype.round=function(t){return this.transform(J.ROUND(t))},o.prototype.toAbs=function(){return this.transform(J.TO_ABS())},o.prototype.toRel=function(){return this.transform(J.TO_REL())},o.prototype.normalizeHVZ=function(t,e,i){return this.transform(J.NORMALIZE_HVZ(t,e,i))},o.prototype.normalizeST=function(){return this.transform(J.NORMALIZE_ST())},o.prototype.qtToC=function(){return this.transform(J.QT_TO_C())},o.prototype.aToC=function(){return this.transform(J.A_TO_C())},o.prototype.sanitize=function(t){return this.transform(J.SANITIZE(t))},o.prototype.translate=function(t,e){return this.transform(J.TRANSLATE(t,e))},o.prototype.scale=function(t,e){return this.transform(J.SCALE(t,e))},o.prototype.rotate=function(t,e,i){return this.transform(J.ROTATE(t,e,i))},o.prototype.matrix=function(t,e,i,n,s,a){return this.transform(J.MATRIX(t,e,i,n,s,a))},o.prototype.skewX=function(t){return this.transform(J.SKEW_X(t))},o.prototype.skewY=function(t){return this.transform(J.SKEW_Y(t))},o.prototype.xSymmetry=function(t){return this.transform(J.X_AXIS_SYMMETRY(t))},o.prototype.ySymmetry=function(t){return this.transform(J.Y_AXIS_SYMMETRY(t))},o.prototype.annotateArcs=function(){return this.transform(J.ANNOTATE_ARCS())},o}(),vs=function(o){return o===" "||o==="	"||o==="\r"||o===`
`},Wi=function(o){return"0".charCodeAt(0)<=o.charCodeAt(0)&&o.charCodeAt(0)<="9".charCodeAt(0)},xs=function(o){function t(){var e=o.call(this)||this;return e.curNumber="",e.curCommandType=-1,e.curCommandRelative=!1,e.canParseCommandOrComma=!0,e.curNumberHasExp=!1,e.curNumberHasExpDigits=!1,e.curNumberHasDecimal=!1,e.curArgs=[],e}return Fi(t,o),t.prototype.finish=function(e){if(e===void 0&&(e=[]),this.parse(" ",e),this.curArgs.length!==0||!this.canParseCommandOrComma)throw new SyntaxError("Unterminated command at the path end.");return e},t.prototype.parse=function(e,i){var n=this;i===void 0&&(i=[]);for(var s=function(h){i.push(h),n.curArgs.length=0,n.canParseCommandOrComma=!0},a=0;a<e.length;a++){var r=e[a],l=!(this.curCommandType!==b.ARC||this.curArgs.length!==3&&this.curArgs.length!==4||this.curNumber.length!==1||this.curNumber!=="0"&&this.curNumber!=="1"),c=Wi(r)&&(this.curNumber==="0"&&r==="0"||l);if(!Wi(r)||c)if(r!=="e"&&r!=="E")if(r!=="-"&&r!=="+"||!this.curNumberHasExp||this.curNumberHasExpDigits)if(r!=="."||this.curNumberHasExp||this.curNumberHasDecimal||l){if(this.curNumber&&this.curCommandType!==-1){var u=Number(this.curNumber);if(isNaN(u))throw new SyntaxError("Invalid number ending at "+a);if(this.curCommandType===b.ARC){if(this.curArgs.length===0||this.curArgs.length===1){if(0>u)throw new SyntaxError('Expected positive number, got "'+u+'" at index "'+a+'"')}else if((this.curArgs.length===3||this.curArgs.length===4)&&this.curNumber!=="0"&&this.curNumber!=="1")throw new SyntaxError('Expected a flag, got "'+this.curNumber+'" at index "'+a+'"')}this.curArgs.push(u),this.curArgs.length===ws[this.curCommandType]&&(b.HORIZ_LINE_TO===this.curCommandType?s({type:b.HORIZ_LINE_TO,relative:this.curCommandRelative,x:u}):b.VERT_LINE_TO===this.curCommandType?s({type:b.VERT_LINE_TO,relative:this.curCommandRelative,y:u}):this.curCommandType===b.MOVE_TO||this.curCommandType===b.LINE_TO||this.curCommandType===b.SMOOTH_QUAD_TO?(s({type:this.curCommandType,relative:this.curCommandRelative,x:this.curArgs[0],y:this.curArgs[1]}),b.MOVE_TO===this.curCommandType&&(this.curCommandType=b.LINE_TO)):this.curCommandType===b.CURVE_TO?s({type:b.CURVE_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x2:this.curArgs[2],y2:this.curArgs[3],x:this.curArgs[4],y:this.curArgs[5]}):this.curCommandType===b.SMOOTH_CURVE_TO?s({type:b.SMOOTH_CURVE_TO,relative:this.curCommandRelative,x2:this.curArgs[0],y2:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===b.QUAD_TO?s({type:b.QUAD_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===b.ARC&&s({type:b.ARC,relative:this.curCommandRelative,rX:this.curArgs[0],rY:this.curArgs[1],xRot:this.curArgs[2],lArcFlag:this.curArgs[3],sweepFlag:this.curArgs[4],x:this.curArgs[5],y:this.curArgs[6]})),this.curNumber="",this.curNumberHasExpDigits=!1,this.curNumberHasExp=!1,this.curNumberHasDecimal=!1,this.canParseCommandOrComma=!0}if(!vs(r))if(r===","&&this.canParseCommandOrComma)this.canParseCommandOrComma=!1;else if(r!=="+"&&r!=="-"&&r!==".")if(c)this.curNumber=r,this.curNumberHasDecimal=!1;else{if(this.curArgs.length!==0)throw new SyntaxError("Unterminated command at index "+a+".");if(!this.canParseCommandOrComma)throw new SyntaxError('Unexpected character "'+r+'" at index '+a+". Command cannot follow comma");if(this.canParseCommandOrComma=!1,r!=="z"&&r!=="Z")if(r==="h"||r==="H")this.curCommandType=b.HORIZ_LINE_TO,this.curCommandRelative=r==="h";else if(r==="v"||r==="V")this.curCommandType=b.VERT_LINE_TO,this.curCommandRelative=r==="v";else if(r==="m"||r==="M")this.curCommandType=b.MOVE_TO,this.curCommandRelative=r==="m";else if(r==="l"||r==="L")this.curCommandType=b.LINE_TO,this.curCommandRelative=r==="l";else if(r==="c"||r==="C")this.curCommandType=b.CURVE_TO,this.curCommandRelative=r==="c";else if(r==="s"||r==="S")this.curCommandType=b.SMOOTH_CURVE_TO,this.curCommandRelative=r==="s";else if(r==="q"||r==="Q")this.curCommandType=b.QUAD_TO,this.curCommandRelative=r==="q";else if(r==="t"||r==="T")this.curCommandType=b.SMOOTH_QUAD_TO,this.curCommandRelative=r==="t";else{if(r!=="a"&&r!=="A")throw new SyntaxError('Unexpected character "'+r+'" at index '+a+".");this.curCommandType=b.ARC,this.curCommandRelative=r==="a"}else i.push({type:b.CLOSE_PATH}),this.canParseCommandOrComma=!0,this.curCommandType=-1}else this.curNumber=r,this.curNumberHasDecimal=r==="."}else this.curNumber+=r,this.curNumberHasDecimal=!0;else this.curNumber+=r;else this.curNumber+=r,this.curNumberHasExp=!0;else this.curNumber+=r,this.curNumberHasExpDigits=this.curNumberHasExp}return i},t.prototype.transform=function(e){return Object.create(this,{parse:{value:function(i,n){n===void 0&&(n=[]);for(var s=0,a=Object.getPrototypeOf(this).parse.call(this,i);s<a.length;s++){var r=a[s],l=e(r);Array.isArray(l)?n.push.apply(n,l):n.push(l)}return n}}})},t}(Xi),b=function(o){function t(e){var i=o.call(this)||this;return i.commands=typeof e=="string"?t.parse(e):e,i}return Fi(t,o),t.prototype.encode=function(){return t.encode(this.commands)},t.prototype.getBounds=function(){var e=J.CALCULATE_BOUNDS();return this.transform(e),e},t.prototype.transform=function(e){for(var i=[],n=0,s=this.commands;n<s.length;n++){var a=e(s[n]);Array.isArray(a)?i.push.apply(i,a):i.push(a)}return this.commands=i,this},t.encode=function(e){return bs(e)},t.parse=function(e){var i=new xs,n=[];return i.parse(e,n),i.finish(n),n},t.CLOSE_PATH=1,t.MOVE_TO=2,t.HORIZ_LINE_TO=4,t.VERT_LINE_TO=8,t.LINE_TO=16,t.CURVE_TO=32,t.SMOOTH_CURVE_TO=64,t.QUAD_TO=128,t.SMOOTH_QUAD_TO=256,t.ARC=512,t.LINE_COMMANDS=t.LINE_TO|t.HORIZ_LINE_TO|t.VERT_LINE_TO,t.DRAWING_COMMANDS=t.HORIZ_LINE_TO|t.VERT_LINE_TO|t.LINE_TO|t.CURVE_TO|t.SMOOTH_CURVE_TO|t.QUAD_TO|t.SMOOTH_QUAD_TO|t.ARC,t}(Xi),ws=((yt={})[b.MOVE_TO]=2,yt[b.LINE_TO]=2,yt[b.HORIZ_LINE_TO]=1,yt[b.VERT_LINE_TO]=1,yt[b.CLOSE_PATH]=0,yt[b.QUAD_TO]=4,yt[b.SMOOTH_QUAD_TO]=2,yt[b.CURVE_TO]=6,yt[b.SMOOTH_CURVE_TO]=4,yt[b.ARC]=7,yt);function Ae(o){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ae=function(t){return typeof t}:Ae=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ae(o)}function Ss(o,t){if(!(o instanceof t))throw new TypeError("Cannot call a class as a function")}var Ts=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],As=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function Cs(o,t,e,i,n){if(typeof o=="string"&&(o=document.getElementById(o)),!o||Ae(o)!=="object"||!("getContext"in o))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var s=o.getContext("2d");try{return s.getImageData(t,e,i,n)}catch(a){throw new Error("unable to access image data: "+a)}}function Es(o,t,e,i,n,s){if(!(isNaN(s)||s<1)){s|=0;var a=Cs(o,t,e,i,n);a=_s(a,t,e,i,n,s),o.getContext("2d").putImageData(a,t,e)}}function _s(o,t,e,i,n,s){for(var a=o.data,r=2*s+1,l=i-1,c=n-1,u=s+1,h=u*(u+1)/2,d=new qi,f=d,g,p=1;p<r;p++)f=f.next=new qi,p===u&&(g=f);f.next=d;for(var m=null,y=null,T=0,x=0,A=Ts[s],B=As[s],R=0;R<n;R++){f=d;for(var N=a[x],H=a[x+1],k=a[x+2],D=a[x+3],W=0;W<u;W++)f.r=N,f.g=H,f.b=k,f.a=D,f=f.next;for(var j=0,_=0,S=0,v=0,E=u*N,w=u*H,O=u*k,C=u*D,V=h*N,Y=h*H,X=h*k,G=h*D,nt=1;nt<u;nt++){var ot=x+((l<nt?l:nt)<<2),wt=a[ot],Rt=a[ot+1],Et=a[ot+2],st=a[ot+3],ft=u-nt;V+=(f.r=wt)*ft,Y+=(f.g=Rt)*ft,X+=(f.b=Et)*ft,G+=(f.a=st)*ft,j+=wt,_+=Rt,S+=Et,v+=st,f=f.next}m=d,y=g;for(var zt=0;zt<i;zt++){var Dt=G*A>>B;if(a[x+3]=Dt,Dt!==0){var ii=255/Dt;a[x]=(V*A>>B)*ii,a[x+1]=(Y*A>>B)*ii,a[x+2]=(X*A>>B)*ii}else a[x]=a[x+1]=a[x+2]=0;V-=E,Y-=w,X-=O,G-=C,E-=m.r,w-=m.g,O-=m.b,C-=m.a;var $t=zt+s+1;$t=T+($t<l?$t:l)<<2,j+=m.r=a[$t],_+=m.g=a[$t+1],S+=m.b=a[$t+2],v+=m.a=a[$t+3],V+=j,Y+=_,X+=S,G+=v,m=m.next;var Oe=y,bn=Oe.r,vn=Oe.g,xn=Oe.b,wn=Oe.a;E+=bn,w+=vn,O+=xn,C+=wn,j-=bn,_-=vn,S-=xn,v-=wn,y=y.next,x+=4}T+=i}for(var ee=0;ee<i;ee++){x=ee<<2;var Ht=a[x],Yt=a[x+1],Xt=a[x+2],ct=a[x+3],ni=u*Ht,si=u*Yt,ri=u*Xt,oi=u*ct,Ne=h*Ht,ke=h*Yt,Ve=h*Xt,Re=h*ct;f=d;for(var Sn=0;Sn<u;Sn++)f.r=Ht,f.g=Yt,f.b=Xt,f.a=ct,f=f.next;for(var Tn=i,ai=0,li=0,ci=0,ui=0,De=1;De<=s;De++){x=Tn+ee<<2;var Ie=u-De;Ne+=(f.r=Ht=a[x])*Ie,ke+=(f.g=Yt=a[x+1])*Ie,Ve+=(f.b=Xt=a[x+2])*Ie,Re+=(f.a=ct=a[x+3])*Ie,ui+=Ht,ai+=Yt,li+=Xt,ci+=ct,f=f.next,De<c&&(Tn+=i)}x=ee,m=d,y=g;for(var hi=0;hi<n;hi++){var ut=x<<2;a[ut+3]=ct=Re*A>>B,ct>0?(ct=255/ct,a[ut]=(Ne*A>>B)*ct,a[ut+1]=(ke*A>>B)*ct,a[ut+2]=(Ve*A>>B)*ct):a[ut]=a[ut+1]=a[ut+2]=0,Ne-=ni,ke-=si,Ve-=ri,Re-=oi,ni-=m.r,si-=m.g,ri-=m.b,oi-=m.a,ut=ee+((ut=hi+u)<c?ut:c)*i<<2,Ne+=ui+=m.r=a[ut],ke+=ai+=m.g=a[ut+1],Ve+=li+=m.b=a[ut+2],Re+=ci+=m.a=a[ut+3],m=m.next,ni+=Ht=y.r,si+=Yt=y.g,ri+=Xt=y.b,oi+=ct=y.a,ui-=Ht,ai-=Yt,li-=Xt,ci-=ct,y=y.next,x+=i}}return o}var qi=function o(){Ss(this,o),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null};function Kt(o){return o.replace(/(?!\u3000)\s+/gm," ")}function Ms(o){return o.replace(/^[\n \t]+/,"")}function Ps(o){return o.replace(/[\n \t]+$/,"")}function ht(o){const t=o.match(/-?(\d+(?:\.\d*(?:[eE][+-]?\d+)?)?|\.\d+)(?=\D|$)/gm);return t?t.map(parseFloat):[]}function Os(o){const t=ht(o);return[t[0]||0,t[1]||0,t[2]||0,t[3]||0,t[4]||0,t[5]||0]}const Ns=/^[A-Z-]+$/;function ks(o){return Ns.test(o)?o.toLowerCase():o}function Gi(o){const t=/url\(('([^']+)'|"([^"]+)"|([^'")]+))\)/.exec(o);return t&&(t[2]||t[3]||t[4])||""}function Vs(o){if(!o.startsWith("rgb"))return o;let t=3;return o.replace(/\d+(\.\d+)?/g,(i,n)=>t--&&n?String(Math.round(parseFloat(i))):i)}const Rs=/(\[[^\]]+\])/g,Ds=/(#[^\s+>~.[:]+)/g,Is=/(\.[^\s+>~.[:]+)/g,Ls=/(::[^\s+>~.[:]+|:first-line|:first-letter|:before|:after)/gi,Bs=/(:[\w-]+\([^)]*\))/gi,Fs=/(:[^\s+>~.[:]+)/g,Us=/([^\s+>~.[:]+)/g;function Bt(o,t){const e=t.exec(o);return e?[o.replace(t," "),e.length]:[o,0]}function zs(o){const t=[0,0,0];let e=o.replace(/:not\(([^)]*)\)/g,"     $1 ").replace(/{[\s\S]*/gm," "),i=0;return[e,i]=Bt(e,Rs),t[1]+=i,[e,i]=Bt(e,Ds),t[0]+=i,[e,i]=Bt(e,Is),t[1]+=i,[e,i]=Bt(e,Ls),t[2]+=i,[e,i]=Bt(e,Bs),t[1]+=i,[e,i]=Bt(e,Fs),t[1]+=i,e=e.replace(/[*\s+>~]/g," ").replace(/[#.]/g," "),[e,i]=Bt(e,Us),t[2]+=i,t.join("")}const Jt=1e-8;function Qi(o){return Math.sqrt(Math.pow(o[0],2)+Math.pow(o[1],2))}function je(o,t){return(o[0]*t[0]+o[1]*t[1])/(Qi(o)*Qi(t))}function ji(o,t){return(o[0]*t[1]<o[1]*t[0]?-1:1)*Math.acos(je(o,t))}function Zi(o){return o*o*o}function Ki(o){return 3*o*o*(1-o)}function Ji(o){return 3*o*(1-o)*(1-o)}function tn(o){return(1-o)*(1-o)*(1-o)}function en(o){return o*o}function nn(o){return 2*o*(1-o)}function sn(o){return(1-o)*(1-o)}class P{static empty(t){return new P(t,"EMPTY","")}split(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:" ";const{document:e,name:i}=this;return Kt(this.getString()).trim().split(t).map(n=>new P(e,i,n))}hasValue(t){const e=this.value;return e!==null&&e!==""&&(t||e!==0)&&typeof e!="undefined"}isString(t){const{value:e}=this,i=typeof e=="string";return!i||!t?i:t.test(e)}isUrlDefinition(){return this.isString(/^url\(/)}isPixels(){if(!this.hasValue())return!1;const t=this.getString();switch(!0){case t.endsWith("px"):case/^[0-9]+$/.test(t):return!0;default:return!1}}setValue(t){return this.value=t,this}getValue(t){return typeof t=="undefined"||this.hasValue()?this.value:t}getNumber(t){if(!this.hasValue())return typeof t=="undefined"?0:parseFloat(t);const{value:e}=this;let i=parseFloat(e);return this.isString(/%$/)&&(i/=100),i}getString(t){return typeof t=="undefined"||this.hasValue()?typeof this.value=="undefined"?"":String(this.value):String(t)}getColor(t){let e=this.getString(t);return this.isNormalizedColor||(this.isNormalizedColor=!0,e=Vs(e),this.value=e),e}getDpi(){return 96}getRem(){return this.document.rootEmSize}getEm(){return this.document.emSize}getUnits(){return this.getString().replace(/[0-9.-]/g,"")}getPixels(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!this.hasValue())return 0;const[i,n]=typeof t=="boolean"?[void 0,t]:[t],{viewPort:s}=this.document.screen;switch(!0){case this.isString(/vmin$/):return this.getNumber()/100*Math.min(s.computeSize("x"),s.computeSize("y"));case this.isString(/vmax$/):return this.getNumber()/100*Math.max(s.computeSize("x"),s.computeSize("y"));case this.isString(/vw$/):return this.getNumber()/100*s.computeSize("x");case this.isString(/vh$/):return this.getNumber()/100*s.computeSize("y");case this.isString(/rem$/):return this.getNumber()*this.getRem();case this.isString(/em$/):return this.getNumber()*this.getEm();case this.isString(/ex$/):return this.getNumber()*this.getEm()/2;case this.isString(/px$/):return this.getNumber();case this.isString(/pt$/):return this.getNumber()*this.getDpi()*(1/72);case this.isString(/pc$/):return this.getNumber()*15;case this.isString(/cm$/):return this.getNumber()*this.getDpi()/2.54;case this.isString(/mm$/):return this.getNumber()*this.getDpi()/25.4;case this.isString(/in$/):return this.getNumber()*this.getDpi();case(this.isString(/%$/)&&n):return this.getNumber()*this.getEm();case this.isString(/%$/):return this.getNumber()*s.computeSize(i);default:{const a=this.getNumber();return e&&a<1?a*s.computeSize(i):a}}}getMilliseconds(){return this.hasValue()?this.isString(/ms$/)?this.getNumber():this.getNumber()*1e3:0}getRadians(){if(!this.hasValue())return 0;switch(!0){case this.isString(/deg$/):return this.getNumber()*(Math.PI/180);case this.isString(/grad$/):return this.getNumber()*(Math.PI/200);case this.isString(/rad$/):return this.getNumber();default:return this.getNumber()*(Math.PI/180)}}getDefinition(){const t=this.getString(),e=/#([^)'"]+)/.exec(t),i=(e==null?void 0:e[1])||t;return this.document.definitions[i]}getFillStyleDefinition(t,e){let i=this.getDefinition();if(!i)return null;if(typeof i.createGradient=="function"&&"getBoundingBox"in t)return i.createGradient(this.document.ctx,t,e);if(typeof i.createPattern=="function"){if(i.getHrefAttribute().hasValue()){const n=i.getAttribute("patternTransform");i=i.getHrefAttribute().getDefinition(),i&&n.hasValue()&&i.getAttribute("patternTransform",!0).setValue(n.value)}if(i)return i.createPattern(this.document.ctx,t,e)}return null}getTextBaseline(){if(!this.hasValue())return null;const t=this.getString();return P.textBaselineMapping[t]||null}addOpacity(t){let e=this.getColor();const i=e.length;let n=0;for(let s=0;s<i&&(e[s]===","&&n++,n!==3);s++);if(t.hasValue()&&this.isString()&&n!==3){const s=new qe(e);s.ok&&(s.alpha=t.getNumber(),e=s.toRGBA())}return new P(this.document,this.name,e)}constructor(t,e,i){this.document=t,this.name=e,this.value=i,this.isNormalizedColor=!1}}P.textBaselineMapping={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};class ue{clear(){this.viewPorts=[]}setCurrent(t,e){this.viewPorts.push({width:t,height:e})}removeCurrent(){this.viewPorts.pop()}getRoot(){const[t]=this.viewPorts;return t||rn()}getCurrent(){const{viewPorts:t}=this,e=t[t.length-1];return e||rn()}get width(){return this.getCurrent().width}get height(){return this.getCurrent().height}computeSize(t){return typeof t=="number"?t:t==="x"?this.width:t==="y"?this.height:Math.sqrt(Math.pow(this.width,2)+Math.pow(this.height,2))/Math.sqrt(2)}constructor(){this.viewPorts=[]}}ue.DEFAULT_VIEWPORT_WIDTH=800,ue.DEFAULT_VIEWPORT_HEIGHT=600;function rn(){return{width:ue.DEFAULT_VIEWPORT_WIDTH,height:ue.DEFAULT_VIEWPORT_HEIGHT}}class Z{static parse(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const[i=e,n=e]=ht(t);return new Z(i,n)}static parseScale(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const[i=e,n=i]=ht(t);return new Z(i,n)}static parsePath(t){const e=ht(t),i=e.length,n=[];for(let s=0;s<i;s+=2)n.push(new Z(e[s],e[s+1]));return n}angleTo(t){return Math.atan2(t.y-this.y,t.x-this.x)}applyTransform(t){const{x:e,y:i}=this,n=e*t[0]+i*t[2]+t[4],s=e*t[1]+i*t[3]+t[5];this.x=n,this.y=s}constructor(t,e){this.x=t,this.y=e}}class $s{isWorking(){return this.working}start(){if(this.working)return;const{screen:t,onClick:e,onMouseMove:i}=this,n=t.ctx.canvas;n.onclick=e,n.onmousemove=i,this.working=!0}stop(){if(!this.working)return;const t=this.screen.ctx.canvas;this.working=!1,t.onclick=null,t.onmousemove=null}hasEvents(){return this.working&&this.events.length>0}runEvents(){if(!this.working)return;const{screen:t,events:e,eventElements:i}=this,{style:n}=t.ctx.canvas;let s;n&&(n.cursor=""),e.forEach((a,r)=>{let{run:l}=a;for(s=i[r];s;)l(s),s=s.parent}),this.events=[],this.eventElements=[]}checkPath(t,e){if(!this.working||!e)return;const{events:i,eventElements:n}=this;i.forEach((s,a)=>{let{x:r,y:l}=s;!n[a]&&e.isPointInPath&&e.isPointInPath(r,l)&&(n[a]=t)})}checkBoundingBox(t,e){if(!this.working||!e)return;const{events:i,eventElements:n}=this;i.forEach((s,a)=>{let{x:r,y:l}=s;!n[a]&&e.isPointInBox(r,l)&&(n[a]=t)})}mapXY(t,e){const{window:i,ctx:n}=this.screen,s=new Z(t,e);let a=n.canvas;for(;a;)s.x-=a.offsetLeft,s.y-=a.offsetTop,a=a.offsetParent;return(i==null?void 0:i.scrollX)&&(s.x+=i.scrollX),(i==null?void 0:i.scrollY)&&(s.y+=i.scrollY),s}onClick(t){const{x:e,y:i}=this.mapXY(t.clientX,t.clientY);this.events.push({type:"onclick",x:e,y:i,run(n){n.onClick&&n.onClick()}})}onMouseMove(t){const{x:e,y:i}=this.mapXY(t.clientX,t.clientY);this.events.push({type:"onmousemove",x:e,y:i,run(n){n.onMouseMove&&n.onMouseMove()}})}constructor(t){this.screen=t,this.working=!1,this.events=[],this.eventElements=[],this.onClick=this.onClick.bind(this),this.onMouseMove=this.onMouseMove.bind(this)}}const on=typeof window!="undefined"?window:null,an=typeof fetch!="undefined"?fetch.bind(void 0):void 0;class At{wait(t){this.waits.push(t)}ready(){return this.readyPromise?this.readyPromise:Promise.resolve()}isReady(){if(this.isReadyLock)return!0;const t=this.waits.every(e=>e());return t&&(this.waits=[],this.resolveReady&&this.resolveReady()),this.isReadyLock=t,t}setDefaults(t){t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4}setViewBox(t){let{document:e,ctx:i,aspectRatio:n,width:s,desiredWidth:a,height:r,desiredHeight:l,minX:c=0,minY:u=0,refX:h,refY:d,clip:f=!1,clipX:g=0,clipY:p=0}=t;const m=Kt(n).replace(/^defer\s/,""),[y,T]=m.split(" "),x=y||"xMidYMid",A=T||"meet",B=s/a,R=r/l,N=Math.min(B,R),H=Math.max(B,R);let k=a,D=l;A==="meet"&&(k*=N,D*=N),A==="slice"&&(k*=H,D*=H);const W=new P(e,"refX",h),j=new P(e,"refY",d),_=W.hasValue()&&j.hasValue();if(_&&i.translate(-N*W.getPixels("x"),-N*j.getPixels("y")),f){const S=N*g,v=N*p;i.beginPath(),i.moveTo(S,v),i.lineTo(s,v),i.lineTo(s,r),i.lineTo(S,r),i.closePath(),i.clip()}if(!_){const S=A==="meet"&&N===R,v=A==="slice"&&H===R,E=A==="meet"&&N===B,w=A==="slice"&&H===B;x.startsWith("xMid")&&(S||v)&&i.translate(s/2-k/2,0),x.endsWith("YMid")&&(E||w)&&i.translate(0,r/2-D/2),x.startsWith("xMax")&&(S||v)&&i.translate(s-k,0),x.endsWith("YMax")&&(E||w)&&i.translate(0,r-D)}switch(!0){case x==="none":i.scale(B,R);break;case A==="meet":i.scale(N,N);break;case A==="slice":i.scale(H,H);break}i.translate(-c,-u)}start(t){let{enableRedraw:e=!1,ignoreMouse:i=!1,ignoreAnimation:n=!1,ignoreDimensions:s=!1,ignoreClear:a=!1,forceRedraw:r,scaleWidth:l,scaleHeight:c,offsetX:u,offsetY:h}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{mouse:d}=this,f=1e3/At.FRAMERATE;if(this.frameDuration=f,this.readyPromise=new Promise(T=>{this.resolveReady=T}),this.isReady()&&this.render(t,s,a,l,c,u,h),!e)return;let g=Date.now(),p=g,m=0;const y=()=>{g=Date.now(),m=g-p,m>=f&&(p=g-m%f,this.shouldUpdate(n,r)&&(this.render(t,s,a,l,c,u,h),d.runEvents())),this.intervalId=We(y)};i||d.start(),this.intervalId=We(y)}stop(){this.intervalId&&(We.cancel(this.intervalId),this.intervalId=null),this.mouse.stop()}shouldUpdate(t,e){if(!t){const{frameDuration:i}=this;if(this.animations.reduce((s,a)=>a.update(i)||s,!1))return!0}return!!(typeof e=="function"&&e()||!this.isReadyLock&&this.isReady()||this.mouse.hasEvents())}render(t,e,i,n,s,a,r){const{viewPort:l,ctx:c,isFirstRender:u}=this,h=c.canvas;l.clear(),h.width&&h.height&&l.setCurrent(h.width,h.height);const d=t.getStyle("width"),f=t.getStyle("height");!e&&(u||typeof n!="number"&&typeof s!="number")&&(d.hasValue()&&(h.width=d.getPixels("x"),h.style&&(h.style.width="".concat(h.width,"px"))),f.hasValue()&&(h.height=f.getPixels("y"),h.style&&(h.style.height="".concat(h.height,"px"))));let g=h.clientWidth||h.width,p=h.clientHeight||h.height;if(e&&d.hasValue()&&f.hasValue()&&(g=d.getPixels("x"),p=f.getPixels("y")),l.setCurrent(g,p),typeof a=="number"&&t.getAttribute("x",!0).setValue(a),typeof r=="number"&&t.getAttribute("y",!0).setValue(r),typeof n=="number"||typeof s=="number"){const m=ht(t.getAttribute("viewBox").getString());let y=0,T=0;if(typeof n=="number"){const A=t.getStyle("width");A.hasValue()?y=A.getPixels("x")/n:m[2]&&!isNaN(m[2])&&(y=m[2]/n)}if(typeof s=="number"){const A=t.getStyle("height");A.hasValue()?T=A.getPixels("y")/s:m[3]&&!isNaN(m[3])&&(T=m[3]/s)}y||(y=T),T||(T=y),t.getAttribute("width",!0).setValue(n),t.getAttribute("height",!0).setValue(s);const x=t.getStyle("transform",!0,!0);x.setValue("".concat(x.getString()," scale(").concat(1/y,", ").concat(1/T,")"))}i||c.clearRect(0,0,g,p),t.render(c),u&&(this.isFirstRender=!1)}constructor(t,{fetch:e=an,window:i=on}={}){if(this.ctx=t,this.viewPort=new ue,this.mouse=new $s(this),this.animations=[],this.waits=[],this.frameDuration=0,this.isReadyLock=!1,this.isFirstRender=!0,this.intervalId=null,this.window=i,!e)throw new Error("Can't find 'fetch' in 'globalThis', please provide it via options");this.fetch=e}}At.defaultWindow=on,At.defaultFetch=an,At.FRAMERATE=30,At.MAX_VIRTUAL_PIXELS=3e4;const{defaultFetch:Hs}=At,Ys=typeof DOMParser!="undefined"?DOMParser:void 0;class Ze{async parse(t){return t.startsWith("<")?this.parseFromString(t):this.load(t)}parseFromString(t){const e=new this.DOMParser;try{return this.checkDocument(e.parseFromString(t,"image/svg+xml"))}catch{return this.checkDocument(e.parseFromString(t,"text/xml"))}}checkDocument(t){const e=t.getElementsByTagName("parsererror")[0];if(e)throw new Error(e.textContent||"Unknown parse error");return t}async load(t){const i=await(await this.fetch(t)).text();return this.parseFromString(i)}constructor({fetch:t=Hs,DOMParser:e=Ys}={}){if(!t)throw new Error("Can't find 'fetch' in 'globalThis', please provide it via options");if(!e)throw new Error("Can't find 'DOMParser' in 'globalThis', please provide it via options");this.fetch=t,this.DOMParser=e}}class Xs{apply(t){const{x:e,y:i}=this.point;t.translate(e||0,i||0)}unapply(t){const{x:e,y:i}=this.point;t.translate(-1*e||0,-1*i||0)}applyToPoint(t){const{x:e,y:i}=this.point;t.applyTransform([1,0,0,1,e||0,i||0])}constructor(t,e){this.type="translate",this.point=Z.parse(e)}}class Ws{apply(t){const{cx:e,cy:i,originX:n,originY:s,angle:a}=this,r=e+n.getPixels("x"),l=i+s.getPixels("y");t.translate(r,l),t.rotate(a.getRadians()),t.translate(-r,-l)}unapply(t){const{cx:e,cy:i,originX:n,originY:s,angle:a}=this,r=e+n.getPixels("x"),l=i+s.getPixels("y");t.translate(r,l),t.rotate(-1*a.getRadians()),t.translate(-r,-l)}applyToPoint(t){const{cx:e,cy:i,angle:n}=this,s=n.getRadians();t.applyTransform([1,0,0,1,e||0,i||0]),t.applyTransform([Math.cos(s),Math.sin(s),-Math.sin(s),Math.cos(s),0,0]),t.applyTransform([1,0,0,1,-e||0,-i||0])}constructor(t,e,i){this.type="rotate";const n=ht(e);this.angle=new P(t,"angle",n[0]),this.originX=i[0],this.originY=i[1],this.cx=n[1]||0,this.cy=n[2]||0}}class qs{apply(t){const{scale:{x:e,y:i},originX:n,originY:s}=this,a=n.getPixels("x"),r=s.getPixels("y");t.translate(a,r),t.scale(e,i||e),t.translate(-a,-r)}unapply(t){const{scale:{x:e,y:i},originX:n,originY:s}=this,a=n.getPixels("x"),r=s.getPixels("y");t.translate(a,r),t.scale(1/e,1/i||e),t.translate(-a,-r)}applyToPoint(t){const{x:e,y:i}=this.scale;t.applyTransform([e||0,0,0,i||0,0,0])}constructor(t,e,i){this.type="scale";const n=Z.parseScale(e);(n.x===0||n.y===0)&&(n.x=Jt,n.y=Jt),this.scale=n,this.originX=i[0],this.originY=i[1]}}class ln{apply(t){const{originX:e,originY:i,matrix:n}=this,s=e.getPixels("x"),a=i.getPixels("y");t.translate(s,a),t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),t.translate(-s,-a)}unapply(t){const{originX:e,originY:i,matrix:n}=this,s=n[0],a=n[2],r=n[4],l=n[1],c=n[3],u=n[5],h=0,d=0,f=1,g=1/(s*(c*f-u*d)-a*(l*f-u*h)+r*(l*d-c*h)),p=e.getPixels("x"),m=i.getPixels("y");t.translate(p,m),t.transform(g*(c*f-u*d),g*(u*h-l*f),g*(r*d-a*f),g*(s*f-r*h),g*(a*u-r*c),g*(r*l-s*u)),t.translate(-p,-m)}applyToPoint(t){t.applyTransform(this.matrix)}constructor(t,e,i){this.type="matrix",this.matrix=Os(e),this.originX=i[0],this.originY=i[1]}}class cn extends ln{constructor(t,e,i){super(t,e,i);this.type="skew",this.angle=new P(t,"angle",e)}}class Gs extends cn{constructor(t,e,i){super(t,e,i);this.type="skewX",this.matrix=[1,0,Math.tan(this.angle.getRadians()),1,0,0]}}class Qs extends cn{constructor(t,e,i){super(t,e,i);this.type="skewY",this.matrix=[1,Math.tan(this.angle.getRadians()),0,1,0,0]}}function js(o){return Kt(o).trim().replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/)}function Zs(o){const[t="",e=""]=o.split("(");return[t.trim(),e.trim().replace(")","")]}class Ft{static fromElement(t,e){const i=e.getStyle("transform",!1,!0);if(i.hasValue()){const[n,s=n]=e.getStyle("transform-origin",!1,!0).split();if(n&&s){const a=[n,s];return new Ft(t,i.getString(),a)}}return null}apply(t){this.transforms.forEach(e=>e.apply(t))}unapply(t){this.transforms.forEach(e=>e.unapply(t))}applyToPoint(t){this.transforms.forEach(e=>e.applyToPoint(t))}constructor(t,e,i){this.document=t,this.transforms=[],js(e).forEach(s=>{if(s==="none")return;const[a,r]=Zs(s),l=Ft.transformTypes[a];l&&this.transforms.push(new l(this.document,r,i))})}}Ft.transformTypes={translate:Xs,rotate:Ws,scale:qs,matrix:ln,skewX:Gs,skewY:Qs};class Q{getAttribute(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const i=this.attributes[t];if(!i&&e){const n=new P(this.document,t,"");return this.attributes[t]=n,n}return i||P.empty(this.document)}getHrefAttribute(){let t;for(const e in this.attributes)if(e==="href"||e.endsWith(":href")){t=this.attributes[e];break}return t||P.empty(this.document)}getStyle(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const n=this.styles[t];if(n)return n;const s=this.getAttribute(t);if(s.hasValue())return this.styles[t]=s,s;if(!i){const{parent:a}=this;if(a){const r=a.getStyle(t);if(r.hasValue())return r}}if(e){const a=new P(this.document,t,"");return this.styles[t]=a,a}return P.empty(this.document)}render(t){if(!(this.getStyle("display").getString()==="none"||this.getStyle("visibility").getString()==="hidden")){if(t.save(),this.getStyle("mask").hasValue()){const e=this.getStyle("mask").getDefinition();e&&(this.applyEffects(t),e.apply(t,this))}else if(this.getStyle("filter").getValue("none")!=="none"){const e=this.getStyle("filter").getDefinition();e&&(this.applyEffects(t),e.apply(t,this))}else this.setContext(t),this.renderChildren(t),this.clearContext(t);t.restore()}}setContext(t){}applyEffects(t){const e=Ft.fromElement(this.document,this);e&&e.apply(t);const i=this.getStyle("clip-path",!1,!0);if(i.hasValue()){const n=i.getDefinition();n&&n.apply(t)}}clearContext(t){}renderChildren(t){this.children.forEach(e=>{e.render(t)})}addChild(t){const e=t instanceof Q?t:this.document.createElement(t);e.parent=this,Q.ignoreChildTypes.includes(e.type)||this.children.push(e)}matchesSelector(t){var e;const{node:i}=this;if(typeof i.matches=="function")return i.matches(t);const n=(e=i.getAttribute)===null||e===void 0?void 0:e.call(i,"class");return!n||n===""?!1:n.split(" ").some(s=>".".concat(s)===t)}addStylesFromStyleDefinition(){const{styles:t,stylesSpecificity:e}=this.document;let i;for(const n in t)if(!n.startsWith("@")&&this.matchesSelector(n)){const s=t[n],a=e[n];if(s)for(const r in s){let l=this.stylesSpecificity[r];typeof l=="undefined"&&(l="000"),a&&a>=l&&(i=s[r],i&&(this.styles[r]=i),this.stylesSpecificity[r]=a)}}}removeStyles(t,e){return e.reduce((n,s)=>{const a=t.getStyle(s);if(!a.hasValue())return n;const r=a.getString();return a.setValue(""),[...n,[s,r]]},[])}restoreStyles(t,e){e.forEach(i=>{let[n,s]=i;t.getStyle(n,!0).setValue(s)})}isFirstChild(){var t;return((t=this.parent)===null||t===void 0?void 0:t.children.indexOf(this))===0}constructor(t,e,i=!1){if(this.document=t,this.node=e,this.captureTextNodes=i,this.type="",this.attributes={},this.styles={},this.stylesSpecificity={},this.animationFrozen=!1,this.animationFrozenValue="",this.parent=null,this.children=[],!e||e.nodeType!==1)return;Array.from(e.attributes).forEach(a=>{const r=ks(a.nodeName);this.attributes[r]=new P(t,r,a.value)}),this.addStylesFromStyleDefinition(),this.getAttribute("style").hasValue()&&this.getAttribute("style").getString().split(";").map(r=>r.trim()).forEach(r=>{if(!r)return;const[l,c]=r.split(":").map(u=>u.trim());l&&(this.styles[l]=new P(t,l,c))});const{definitions:n}=t,s=this.getAttribute("id");s.hasValue()&&(n[s.getString()]||(n[s.getString()]=this)),Array.from(e.childNodes).forEach(a=>{if(a.nodeType===1)this.addChild(a);else if(i&&(a.nodeType===3||a.nodeType===4)){const r=t.createTextNode(a);r.getText().length>0&&this.addChild(r)}})}}Q.ignoreChildTypes=["title"];class Ks extends Q{constructor(t,e,i){super(t,e,i)}}function Js(o){const t=o.trim();return/^('|")/.test(t)?t:'"'.concat(t,'"')}function tr(o){return typeof process=="undefined"?o:o.trim().split(",").map(Js).join(",")}function er(o){if(!o)return"";const t=o.trim().toLowerCase();switch(t){case"normal":case"italic":case"oblique":case"inherit":case"initial":case"unset":return t;default:return/^oblique\s+(-|)\d+deg$/.test(t)?t:""}}function ir(o){if(!o)return"";const t=o.trim().toLowerCase();switch(t){case"normal":case"bold":case"lighter":case"bolder":case"inherit":case"initial":case"unset":return t;default:return/^[\d.]+$/.test(t)?t:""}}class lt{static parse(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,i="",n="",s="",a="",r="";const l=Kt(t).trim().split(" "),c={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1};return l.forEach(u=>{switch(!0){case(!c.fontStyle&&lt.styles.includes(u)):u!=="inherit"&&(i=u),c.fontStyle=!0;break;case(!c.fontVariant&&lt.variants.includes(u)):u!=="inherit"&&(n=u),c.fontStyle=!0,c.fontVariant=!0;break;case(!c.fontWeight&&lt.weights.includes(u)):u!=="inherit"&&(s=u),c.fontStyle=!0,c.fontVariant=!0,c.fontWeight=!0;break;case!c.fontSize:u!=="inherit"&&(a=u.split("/")[0]||""),c.fontStyle=!0,c.fontVariant=!0,c.fontWeight=!0,c.fontSize=!0;break;default:u!=="inherit"&&(r+=u)}}),new lt(i,n,s,a,r,e)}toString(){return[er(this.fontStyle),this.fontVariant,ir(this.fontWeight),this.fontSize,tr(this.fontFamily)].join(" ").trim()}constructor(t,e,i,n,s,a){const r=a?typeof a=="string"?lt.parse(a):a:{};this.fontFamily=s||r.fontFamily,this.fontSize=n||r.fontSize,this.fontStyle=t||r.fontStyle,this.fontWeight=i||r.fontWeight,this.fontVariant=e||r.fontVariant}}lt.styles="normal|italic|oblique|inherit",lt.variants="normal|small-caps|inherit",lt.weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";class bt{get x(){return this.x1}get y(){return this.y1}get width(){return this.x2-this.x1}get height(){return this.y2-this.y1}addPoint(t,e){typeof t!="undefined"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),typeof e!="undefined"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))}addX(t){this.addPoint(t,0)}addY(t){this.addPoint(0,t)}addBoundingBox(t){if(!t)return;const{x1:e,y1:i,x2:n,y2:s}=t;this.addPoint(e,i),this.addPoint(n,s)}sumCubic(t,e,i,n,s){return Math.pow(1-t,3)*e+3*Math.pow(1-t,2)*t*i+3*(1-t)*Math.pow(t,2)*n+Math.pow(t,3)*s}bezierCurveAdd(t,e,i,n,s){const a=6*e-12*i+6*n,r=-3*e+9*i-9*n+3*s,l=3*i-3*e;if(r===0){if(a===0)return;const d=-l/a;0<d&&d<1&&(t?this.addX(this.sumCubic(d,e,i,n,s)):this.addY(this.sumCubic(d,e,i,n,s)));return}const c=Math.pow(a,2)-4*l*r;if(c<0)return;const u=(-a+Math.sqrt(c))/(2*r);0<u&&u<1&&(t?this.addX(this.sumCubic(u,e,i,n,s)):this.addY(this.sumCubic(u,e,i,n,s)));const h=(-a-Math.sqrt(c))/(2*r);0<h&&h<1&&(t?this.addX(this.sumCubic(h,e,i,n,s)):this.addY(this.sumCubic(h,e,i,n,s)))}addBezierCurve(t,e,i,n,s,a,r,l){this.addPoint(t,e),this.addPoint(r,l),this.bezierCurveAdd(!0,t,i,s,r),this.bezierCurveAdd(!1,e,n,a,l)}addQuadraticCurve(t,e,i,n,s,a){const r=t+2/3*(i-t),l=e+2/3*(n-e),c=r+1/3*(s-t),u=l+1/3*(a-e);this.addBezierCurve(t,e,r,c,l,u,s,a)}isPointInBox(t,e){const{x1:i,y1:n,x2:s,y2:a}=this;return i<=t&&t<=s&&n<=e&&e<=a}constructor(t=Number.NaN,e=Number.NaN,i=Number.NaN,n=Number.NaN){this.x1=t,this.y1=e,this.x2=i,this.y2=n,this.addPoint(t,e),this.addPoint(i,n)}}class Ut extends Q{calculateOpacity(){let t=1,e=this;for(;e;){const i=e.getStyle("opacity",!1,!0);i.hasValue(!0)&&(t*=i.getNumber()),e=e.parent}return t}setContext(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!e){const i=this.getStyle("fill"),n=this.getStyle("fill-opacity"),s=this.getStyle("stroke"),a=this.getStyle("stroke-opacity");if(i.isUrlDefinition()){const f=i.getFillStyleDefinition(this,n);f&&(t.fillStyle=f)}else if(i.hasValue()){i.getString()==="currentColor"&&i.setValue(this.getStyle("color").getColor());const f=i.getColor();f!=="inherit"&&(t.fillStyle=f==="none"?"rgba(0,0,0,0)":f)}if(n.hasValue()){const f=new P(this.document,"fill",t.fillStyle).addOpacity(n).getColor();t.fillStyle=f}if(s.isUrlDefinition()){const f=s.getFillStyleDefinition(this,a);f&&(t.strokeStyle=f)}else if(s.hasValue()){s.getString()==="currentColor"&&s.setValue(this.getStyle("color").getColor());const f=s.getString();f!=="inherit"&&(t.strokeStyle=f==="none"?"rgba(0,0,0,0)":f)}if(a.hasValue()){const f=new P(this.document,"stroke",t.strokeStyle).addOpacity(a).getString();t.strokeStyle=f}const r=this.getStyle("stroke-width");if(r.hasValue()){const f=r.getPixels();t.lineWidth=f||Jt}const l=this.getStyle("stroke-linecap"),c=this.getStyle("stroke-linejoin"),u=this.getStyle("stroke-miterlimit"),h=this.getStyle("stroke-dasharray"),d=this.getStyle("stroke-dashoffset");if(l.hasValue()&&(t.lineCap=l.getString()),c.hasValue()&&(t.lineJoin=c.getString()),u.hasValue()&&(t.miterLimit=u.getNumber()),h.hasValue()&&h.getString()!=="none"){const f=ht(h.getString());typeof t.setLineDash!="undefined"?t.setLineDash(f):typeof t.webkitLineDash!="undefined"?t.webkitLineDash=f:typeof t.mozDash!="undefined"&&!(f.length===1&&f[0]===0)&&(t.mozDash=f);const g=d.getPixels();typeof t.lineDashOffset!="undefined"?t.lineDashOffset=g:typeof t.webkitLineDashOffset!="undefined"?t.webkitLineDashOffset=g:typeof t.mozDashOffset!="undefined"&&(t.mozDashOffset=g)}}if(this.modifiedEmSizeStack=!1,typeof t.font!="undefined"){const i=this.getStyle("font"),n=this.getStyle("font-style"),s=this.getStyle("font-variant"),a=this.getStyle("font-weight"),r=this.getStyle("font-size"),l=this.getStyle("font-family"),c=new lt(n.getString(),s.getString(),a.getString(),r.hasValue()?"".concat(r.getPixels(!0),"px"):"",l.getString(),lt.parse(i.getString(),t.font));n.setValue(c.fontStyle),s.setValue(c.fontVariant),a.setValue(c.fontWeight),r.setValue(c.fontSize),l.setValue(c.fontFamily),t.font=c.toString(),r.isPixels()&&(this.document.emSize=r.getPixels(),this.modifiedEmSizeStack=!0)}e||(this.applyEffects(t),t.globalAlpha=this.calculateOpacity())}clearContext(t){super.clearContext(t),this.modifiedEmSizeStack&&this.document.popEmSize()}constructor(...t){super(...t);this.modifiedEmSizeStack=!1}}class kt extends Ut{setContext(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;super.setContext(t,e);const i=this.getStyle("dominant-baseline").getTextBaseline()||this.getStyle("alignment-baseline").getTextBaseline();i&&(t.textBaseline=i)}initializeCoordinates(){this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY}getBoundingBox(t){if(this.type!=="text")return this.getTElementBoundingBox(t);this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(t);let e=null;return this.children.forEach((i,n)=>{const s=this.getChildBoundingBox(t,this,this,n);e?e.addBoundingBox(s):e=s}),e}getFontSize(){const{document:t,parent:e}=this,i=lt.parse(t.ctx.font).fontSize;return e.getStyle("font-size").getNumber(i)}getTElementBoundingBox(t){const e=this.getFontSize();return new bt(this.x,this.y-e,this.x+this.measureText(t),this.y)}getGlyph(t,e,i){const n=e[i];let s;if(t.isArabic){var a;const r=e.length,l=e[i-1],c=e[i+1];let u="isolated";(i===0||l===" ")&&i<r-1&&c!==" "&&(u="terminal"),i>0&&l!==" "&&i<r-1&&c!==" "&&(u="medial"),i>0&&l!==" "&&(i===r-1||c===" ")&&(u="initial"),s=((a=t.arabicGlyphs[n])===null||a===void 0?void 0:a[u])||t.glyphs[n]}else s=t.glyphs[n];return s||(s=t.missingGlyph),s}getText(){return""}getTextFromNode(t){const e=t||this.node,i=Array.from(e.parentNode.childNodes),n=i.indexOf(e),s=i.length-1;let a=Kt(e.textContent||"");return n===0&&(a=Ms(a)),n===s&&(a=Ps(a)),a}renderChildren(t){if(this.type!=="text"){this.renderTElementChildren(t);return}this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(t),this.children.forEach((i,n)=>{this.renderChild(t,this,this,n)});const{mouse:e}=this.document.screen;e.isWorking()&&e.checkBoundingBox(this,this.getBoundingBox(t))}renderTElementChildren(t){const{document:e,parent:i}=this,n=this.getText(),s=i.getStyle("font-family").getDefinition();if(s){const{unitsPerEm:l}=s.fontFace,c=lt.parse(e.ctx.font),u=i.getStyle("font-size").getNumber(c.fontSize),h=i.getStyle("font-style").getString(c.fontStyle),d=u/l,f=s.isRTL?n.split("").reverse().join(""):n,g=ht(i.getAttribute("dx").getString()),p=f.length;for(let m=0;m<p;m++){const y=this.getGlyph(s,f,m);t.translate(this.x,this.y),t.scale(d,-d);const T=t.lineWidth;t.lineWidth=t.lineWidth*l/u,h==="italic"&&t.transform(1,0,.4,1,0,0),y.render(t),h==="italic"&&t.transform(1,0,-.4,1,0,0),t.lineWidth=T,t.scale(1/d,-1/d),t.translate(-this.x,-this.y),this.x+=u*(y.horizAdvX||s.horizAdvX)/l,typeof g[m]!="undefined"&&!isNaN(g[m])&&(this.x+=g[m])}return}const{x:a,y:r}=this;t.fillStyle&&t.fillText(n,a,r),t.strokeStyle&&t.strokeText(n,a,r)}applyAnchoring(){if(this.textChunkStart>=this.leafTexts.length)return;const t=this.leafTexts[this.textChunkStart],e=t.getStyle("text-anchor").getString("start"),i=!1;let n=0;e==="start"&&!i||e==="end"&&i?n=t.x-this.minX:e==="end"&&!i||e==="start"&&i?n=t.x-this.maxX:n=t.x-(this.minX+this.maxX)/2;for(let s=this.textChunkStart;s<this.leafTexts.length;s++)this.leafTexts[s].x+=n;this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.textChunkStart=this.leafTexts.length}adjustChildCoordinatesRecursive(t){this.children.forEach((e,i)=>{this.adjustChildCoordinatesRecursiveCore(t,this,this,i)}),this.applyAnchoring()}adjustChildCoordinatesRecursiveCore(t,e,i,n){const s=i.children[n];s.children.length>0?s.children.forEach((a,r)=>{e.adjustChildCoordinatesRecursiveCore(t,e,s,r)}):this.adjustChildCoordinates(t,e,i,n)}adjustChildCoordinates(t,e,i,n){const s=i.children[n];if(typeof s.measureText!="function")return s;t.save(),s.setContext(t,!0);const a=s.getAttribute("x"),r=s.getAttribute("y"),l=s.getAttribute("dx"),c=s.getAttribute("dy"),u=s.getStyle("font-family").getDefinition(),h=Boolean(u==null?void 0:u.isRTL);n===0&&(a.hasValue()||a.setValue(s.getInheritedAttribute("x")),r.hasValue()||r.setValue(s.getInheritedAttribute("y")),l.hasValue()||l.setValue(s.getInheritedAttribute("dx")),c.hasValue()||c.setValue(s.getInheritedAttribute("dy")));const d=s.measureText(t);return h&&(e.x-=d),a.hasValue()?(e.applyAnchoring(),s.x=a.getPixels("x"),l.hasValue()&&(s.x+=l.getPixels("x"))):(l.hasValue()&&(e.x+=l.getPixels("x")),s.x=e.x),e.x=s.x,h||(e.x+=d),r.hasValue()?(s.y=r.getPixels("y"),c.hasValue()&&(s.y+=c.getPixels("y"))):(c.hasValue()&&(e.y+=c.getPixels("y")),s.y=e.y),e.y=s.y,e.leafTexts.push(s),e.minX=Math.min(e.minX,s.x,s.x+d),e.maxX=Math.max(e.maxX,s.x,s.x+d),s.clearContext(t),t.restore(),s}getChildBoundingBox(t,e,i,n){const s=i.children[n];if(typeof s.getBoundingBox!="function")return null;const a=s.getBoundingBox(t);return a&&s.children.forEach((r,l)=>{const c=e.getChildBoundingBox(t,e,s,l);a.addBoundingBox(c)}),a}renderChild(t,e,i,n){const s=i.children[n];s.render(t),s.children.forEach((a,r)=>{e.renderChild(t,e,s,r)})}measureText(t){const{measureCache:e}=this;if(~e)return e;const i=this.getText(),n=this.measureTargetText(t,i);return this.measureCache=n,n}measureTargetText(t,e){if(!e.length)return 0;const{parent:i}=this,n=i.getStyle("font-family").getDefinition();if(n){const a=this.getFontSize(),r=n.isRTL?e.split("").reverse().join(""):e,l=ht(i.getAttribute("dx").getString()),c=r.length;let u=0;for(let h=0;h<c;h++)u+=(this.getGlyph(n,r,h).horizAdvX||n.horizAdvX)*a/n.fontFace.unitsPerEm,typeof l[h]!="undefined"&&!isNaN(l[h])&&(u+=l[h]);return u}if(!t.measureText)return e.length*10;t.save(),this.setContext(t,!0);const{width:s}=t.measureText(e);return this.clearContext(t),t.restore(),s}getInheritedAttribute(t){let e=this;for(;e instanceof kt&&e.isFirstChild()&&e.parent;){const i=e.parent.getAttribute(t);if(i.hasValue(!0))return i.getString("0");e=e.parent}return null}constructor(t,e,i){super(t,e,new.target===kt?!0:i);this.type="text",this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.measureCache=-1}}class Ce extends kt{getText(){return this.text}constructor(t,e,i){super(t,e,new.target===Ce?!0:i);this.type="tspan",this.text=this.children.length>0?"":this.getTextFromNode()}}class nr extends Ce{constructor(...t){super(...t);this.type="textNode"}}class L extends b{reset(){this.i=-1,this.command=null,this.previousCommand=null,this.start=new Z(0,0),this.control=new Z(0,0),this.current=new Z(0,0),this.points=[],this.angles=[]}isEnd(){const{i:t,commands:e}=this;return t>=e.length-1}next(){const t=this.commands[++this.i];return this.previousCommand=this.command,this.command=t,t}getPoint(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"x",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"y";const i=new Z(this.command[t],this.command[e]);return this.makeAbsolute(i)}getAsControlPoint(t,e){const i=this.getPoint(t,e);return this.control=i,i}getAsCurrentPoint(t,e){const i=this.getPoint(t,e);return this.current=i,i}getReflectedControlPoint(){const t=this.previousCommand.type;if(t!==b.CURVE_TO&&t!==b.SMOOTH_CURVE_TO&&t!==b.QUAD_TO&&t!==b.SMOOTH_QUAD_TO)return this.current;const{current:{x:e,y:i},control:{x:n,y:s}}=this;return new Z(2*e-n,2*i-s)}makeAbsolute(t){if(this.command.relative){const{x:e,y:i}=this.current;t.x+=e,t.y+=i}return t}addMarker(t,e,i){const{points:n,angles:s}=this;i&&s.length>0&&!s[s.length-1]&&(s[s.length-1]=n[n.length-1].angleTo(i)),this.addMarkerAngle(t,e?e.angleTo(t):null)}addMarkerAngle(t,e){this.points.push(t),this.angles.push(e)}getMarkerPoints(){return this.points}getMarkerAngles(){const{angles:t}=this,e=t.length;for(let i=0;i<e;i++)if(!t[i]){for(let n=i+1;n<e;n++)if(t[n]){t[i]=t[n];break}}return t}constructor(t){super(t.replace(/([+\-.])\s+/gm,"$1").replace(/[^MmZzLlHhVvCcSsQqTtAae\d\s.,+-].*/g,""));this.control=new Z(0,0),this.start=new Z(0,0),this.current=new Z(0,0),this.command=null,this.commands=this.commands,this.i=-1,this.previousCommand=null,this.points=[],this.angles=[]}}class q extends Ut{path(t){const{pathParser:e}=this,i=new bt;for(e.reset(),t&&t.beginPath();!e.isEnd();)switch(e.next().type){case L.MOVE_TO:this.pathM(t,i);break;case L.LINE_TO:this.pathL(t,i);break;case L.HORIZ_LINE_TO:this.pathH(t,i);break;case L.VERT_LINE_TO:this.pathV(t,i);break;case L.CURVE_TO:this.pathC(t,i);break;case L.SMOOTH_CURVE_TO:this.pathS(t,i);break;case L.QUAD_TO:this.pathQ(t,i);break;case L.SMOOTH_QUAD_TO:this.pathT(t,i);break;case L.ARC:this.pathA(t,i);break;case L.CLOSE_PATH:this.pathZ(t,i);break}return i}getBoundingBox(t){return this.path()}getMarkers(){const{pathParser:t}=this,e=t.getMarkerPoints(),i=t.getMarkerAngles();return e.map((s,a)=>[s,i[a]])}renderChildren(t){this.path(t),this.document.screen.mouse.checkPath(this,t);const e=this.getStyle("fill-rule");t.fillStyle!==""&&(e.getString("inherit")!=="inherit"?t.fill(e.getString()):t.fill()),t.strokeStyle!==""&&(this.getAttribute("vector-effect").getString()==="non-scaling-stroke"?(t.save(),t.setTransform(1,0,0,1,0,0),t.stroke(),t.restore()):t.stroke());const i=this.getMarkers();if(i){const n=i.length-1,s=this.getStyle("marker-start"),a=this.getStyle("marker-mid"),r=this.getStyle("marker-end");if(s.isUrlDefinition()){const l=s.getDefinition(),[c,u]=i[0];l.render(t,c,u)}if(a.isUrlDefinition()){const l=a.getDefinition();for(let c=1;c<n;c++){const[u,h]=i[c];l.render(t,u,h)}}if(r.isUrlDefinition()){const l=r.getDefinition(),[c,u]=i[n];l.render(t,c,u)}}}static pathM(t){const e=t.getAsCurrentPoint();return t.start=t.current,{point:e}}pathM(t,e){const{pathParser:i}=this,{point:n}=q.pathM(i),{x:s,y:a}=n;i.addMarker(n),e.addPoint(s,a),t&&t.moveTo(s,a)}static pathL(t){const{current:e}=t,i=t.getAsCurrentPoint();return{current:e,point:i}}pathL(t,e){const{pathParser:i}=this,{current:n,point:s}=q.pathL(i),{x:a,y:r}=s;i.addMarker(s,n),e.addPoint(a,r),t&&t.lineTo(a,r)}static pathH(t){const{current:e,command:i}=t,n=new Z((i.relative?e.x:0)+i.x,e.y);return t.current=n,{current:e,point:n}}pathH(t,e){const{pathParser:i}=this,{current:n,point:s}=q.pathH(i),{x:a,y:r}=s;i.addMarker(s,n),e.addPoint(a,r),t&&t.lineTo(a,r)}static pathV(t){const{current:e,command:i}=t,n=new Z(e.x,(i.relative?e.y:0)+i.y);return t.current=n,{current:e,point:n}}pathV(t,e){const{pathParser:i}=this,{current:n,point:s}=q.pathV(i),{x:a,y:r}=s;i.addMarker(s,n),e.addPoint(a,r),t&&t.lineTo(a,r)}static pathC(t){const{current:e}=t,i=t.getPoint("x1","y1"),n=t.getAsControlPoint("x2","y2"),s=t.getAsCurrentPoint();return{current:e,point:i,controlPoint:n,currentPoint:s}}pathC(t,e){const{pathParser:i}=this,{current:n,point:s,controlPoint:a,currentPoint:r}=q.pathC(i);i.addMarker(r,a,s),e.addBezierCurve(n.x,n.y,s.x,s.y,a.x,a.y,r.x,r.y),t&&t.bezierCurveTo(s.x,s.y,a.x,a.y,r.x,r.y)}static pathS(t){const{current:e}=t,i=t.getReflectedControlPoint(),n=t.getAsControlPoint("x2","y2"),s=t.getAsCurrentPoint();return{current:e,point:i,controlPoint:n,currentPoint:s}}pathS(t,e){const{pathParser:i}=this,{current:n,point:s,controlPoint:a,currentPoint:r}=q.pathS(i);i.addMarker(r,a,s),e.addBezierCurve(n.x,n.y,s.x,s.y,a.x,a.y,r.x,r.y),t&&t.bezierCurveTo(s.x,s.y,a.x,a.y,r.x,r.y)}static pathQ(t){const{current:e}=t,i=t.getAsControlPoint("x1","y1"),n=t.getAsCurrentPoint();return{current:e,controlPoint:i,currentPoint:n}}pathQ(t,e){const{pathParser:i}=this,{current:n,controlPoint:s,currentPoint:a}=q.pathQ(i);i.addMarker(a,s,s),e.addQuadraticCurve(n.x,n.y,s.x,s.y,a.x,a.y),t&&t.quadraticCurveTo(s.x,s.y,a.x,a.y)}static pathT(t){const{current:e}=t,i=t.getReflectedControlPoint();t.control=i;const n=t.getAsCurrentPoint();return{current:e,controlPoint:i,currentPoint:n}}pathT(t,e){const{pathParser:i}=this,{current:n,controlPoint:s,currentPoint:a}=q.pathT(i);i.addMarker(a,s,s),e.addQuadraticCurve(n.x,n.y,s.x,s.y,a.x,a.y),t&&t.quadraticCurveTo(s.x,s.y,a.x,a.y)}static pathA(t){const{current:e,command:i}=t;let{rX:n,rY:s,xRot:a,lArcFlag:r,sweepFlag:l}=i;const c=a*(Math.PI/180),u=t.getAsCurrentPoint(),h=new Z(Math.cos(c)*(e.x-u.x)/2+Math.sin(c)*(e.y-u.y)/2,-Math.sin(c)*(e.x-u.x)/2+Math.cos(c)*(e.y-u.y)/2),d=Math.pow(h.x,2)/Math.pow(n,2)+Math.pow(h.y,2)/Math.pow(s,2);d>1&&(n*=Math.sqrt(d),s*=Math.sqrt(d));let f=(r===l?-1:1)*Math.sqrt((Math.pow(n,2)*Math.pow(s,2)-Math.pow(n,2)*Math.pow(h.y,2)-Math.pow(s,2)*Math.pow(h.x,2))/(Math.pow(n,2)*Math.pow(h.y,2)+Math.pow(s,2)*Math.pow(h.x,2)));isNaN(f)&&(f=0);const g=new Z(f*n*h.y/s,f*-s*h.x/n),p=new Z((e.x+u.x)/2+Math.cos(c)*g.x-Math.sin(c)*g.y,(e.y+u.y)/2+Math.sin(c)*g.x+Math.cos(c)*g.y),m=ji([1,0],[(h.x-g.x)/n,(h.y-g.y)/s]),y=[(h.x-g.x)/n,(h.y-g.y)/s],T=[(-h.x-g.x)/n,(-h.y-g.y)/s];let x=ji(y,T);return je(y,T)<=-1&&(x=Math.PI),je(y,T)>=1&&(x=0),{currentPoint:u,rX:n,rY:s,sweepFlag:l,xAxisRotation:c,centp:p,a1:m,ad:x}}pathA(t,e){const{pathParser:i}=this,{currentPoint:n,rX:s,rY:a,sweepFlag:r,xAxisRotation:l,centp:c,a1:u,ad:h}=q.pathA(i),d=1-r?1:-1,f=u+d*(h/2),g=new Z(c.x+s*Math.cos(f),c.y+a*Math.sin(f));if(i.addMarkerAngle(g,f-d*Math.PI/2),i.addMarkerAngle(n,f-d*Math.PI),e.addPoint(n.x,n.y),t&&!isNaN(u)&&!isNaN(h)){const p=s>a?s:a,m=s>a?1:s/a,y=s>a?a/s:1;t.translate(c.x,c.y),t.rotate(l),t.scale(m,y),t.arc(0,0,p,u,u+h,Boolean(1-r)),t.scale(1/m,1/y),t.rotate(-l),t.translate(-c.x,-c.y)}}static pathZ(t){t.current=t.start}pathZ(t,e){q.pathZ(this.pathParser),t&&e.x1!==e.x2&&e.y1!==e.y2&&t.closePath()}constructor(t,e,i){super(t,e,i);this.type="path",this.pathParser=new L(this.getAttribute("d").getString())}}class he extends Ut{setContext(t){var e;const{document:i}=this,{screen:n,window:s}=i,a=t.canvas;if(n.setDefaults(t),"style"in a&&typeof t.font!="undefined"&&s&&typeof s.getComputedStyle!="undefined"){t.font=s.getComputedStyle(a).getPropertyValue("font");const T=new P(i,"fontSize",lt.parse(t.font).fontSize);T.hasValue()&&(i.rootEmSize=T.getPixels("y"),i.emSize=i.rootEmSize)}this.getAttribute("x").hasValue()||this.getAttribute("x",!0).setValue(0),this.getAttribute("y").hasValue()||this.getAttribute("y",!0).setValue(0);let{width:r,height:l}=n.viewPort;this.getStyle("width").hasValue()||this.getStyle("width",!0).setValue("100%"),this.getStyle("height").hasValue()||this.getStyle("height",!0).setValue("100%"),this.getStyle("color").hasValue()||this.getStyle("color",!0).setValue("black");const c=this.getAttribute("refX"),u=this.getAttribute("refY"),h=this.getAttribute("viewBox"),d=h.hasValue()?ht(h.getString()):null,f=!this.root&&this.getStyle("overflow").getValue("hidden")!=="visible";let g=0,p=0,m=0,y=0;d&&(g=d[0],p=d[1]),this.root||(r=this.getStyle("width").getPixels("x"),l=this.getStyle("height").getPixels("y"),this.type==="marker"&&(m=g,y=p,g=0,p=0)),n.viewPort.setCurrent(r,l),this.node&&(!this.parent||((e=this.node.parentNode)===null||e===void 0?void 0:e.nodeName)==="foreignObject")&&this.getStyle("transform",!1,!0).hasValue()&&!this.getStyle("transform-origin",!1,!0).hasValue()&&this.getStyle("transform-origin",!0,!0).setValue("50% 50%"),super.setContext(t),t.translate(this.getAttribute("x").getPixels("x"),this.getAttribute("y").getPixels("y")),d&&(r=d[2],l=d[3]),i.setViewBox({ctx:t,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:n.viewPort.width,desiredWidth:r,height:n.viewPort.height,desiredHeight:l,minX:g,minY:p,refX:c.getValue(),refY:u.getValue(),clip:f,clipX:m,clipY:y}),d&&(n.viewPort.removeCurrent(),n.viewPort.setCurrent(r,l))}clearContext(t){super.clearContext(t),this.document.screen.viewPort.removeCurrent()}resize(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;const n=this.getAttribute("width",!0),s=this.getAttribute("height",!0),a=this.getAttribute("viewBox"),r=this.getAttribute("style"),l=n.getNumber(0),c=s.getNumber(0);if(i)if(typeof i=="string")this.getAttribute("preserveAspectRatio",!0).setValue(i);else{const u=this.getAttribute("preserveAspectRatio");u.hasValue()&&u.setValue(u.getString().replace(/^\s*(\S.*\S)\s*$/,"$1"))}if(n.setValue(t),s.setValue(e),a.hasValue()||a.setValue("0 0 ".concat(l||t," ").concat(c||e)),r.hasValue()){const u=this.getStyle("width"),h=this.getStyle("height");u.hasValue()&&u.setValue("".concat(t,"px")),h.hasValue()&&h.setValue("".concat(e,"px"))}}constructor(...t){super(...t);this.type="svg",this.root=!1}}class un extends q{path(t){const e=this.getAttribute("x").getPixels("x"),i=this.getAttribute("y").getPixels("y"),n=this.getStyle("width",!1,!0).getPixels("x"),s=this.getStyle("height",!1,!0).getPixels("y"),a=this.getAttribute("rx"),r=this.getAttribute("ry");let l=a.getPixels("x"),c=r.getPixels("y");if(a.hasValue()&&!r.hasValue()&&(c=l),r.hasValue()&&!a.hasValue()&&(l=c),l=Math.min(l,n/2),c=Math.min(c,s/2),t){const u=4*((Math.sqrt(2)-1)/3);t.beginPath(),s>0&&n>0&&(t.moveTo(e+l,i),t.lineTo(e+n-l,i),t.bezierCurveTo(e+n-l+u*l,i,e+n,i+c-u*c,e+n,i+c),t.lineTo(e+n,i+s-c),t.bezierCurveTo(e+n,i+s-c+u*c,e+n-l+u*l,i+s,e+n-l,i+s),t.lineTo(e+l,i+s),t.bezierCurveTo(e+l-u*l,i+s,e,i+s-c+u*c,e,i+s-c),t.lineTo(e,i+c),t.bezierCurveTo(e,i+c-u*c,e+l-u*l,i,e+l,i),t.closePath())}return new bt(e,i,e+n,i+s)}getMarkers(){return null}constructor(...t){super(...t);this.type="rect"}}class sr extends q{path(t){const e=this.getAttribute("cx").getPixels("x"),i=this.getAttribute("cy").getPixels("y"),n=this.getAttribute("r").getPixels();return t&&n>0&&(t.beginPath(),t.arc(e,i,n,0,Math.PI*2,!1),t.closePath()),new bt(e-n,i-n,e+n,i+n)}getMarkers(){return null}constructor(...t){super(...t);this.type="circle"}}class rr extends q{path(t){const e=4*((Math.sqrt(2)-1)/3),i=this.getAttribute("rx").getPixels("x"),n=this.getAttribute("ry").getPixels("y"),s=this.getAttribute("cx").getPixels("x"),a=this.getAttribute("cy").getPixels("y");return t&&i>0&&n>0&&(t.beginPath(),t.moveTo(s+i,a),t.bezierCurveTo(s+i,a+e*n,s+e*i,a+n,s,a+n),t.bezierCurveTo(s-e*i,a+n,s-i,a+e*n,s-i,a),t.bezierCurveTo(s-i,a-e*n,s-e*i,a-n,s,a-n),t.bezierCurveTo(s+e*i,a-n,s+i,a-e*n,s+i,a),t.closePath()),new bt(s-i,a-n,s+i,a+n)}getMarkers(){return null}constructor(...t){super(...t);this.type="ellipse"}}class or extends q{getPoints(){return[new Z(this.getAttribute("x1").getPixels("x"),this.getAttribute("y1").getPixels("y")),new Z(this.getAttribute("x2").getPixels("x"),this.getAttribute("y2").getPixels("y"))]}path(t){const[{x:e,y:i},{x:n,y:s}]=this.getPoints();return t&&(t.beginPath(),t.moveTo(e,i),t.lineTo(n,s)),new bt(e,i,n,s)}getMarkers(){const[t,e]=this.getPoints(),i=t.angleTo(e);return[[t,i],[e,i]]}constructor(...t){super(...t);this.type="line"}}class hn extends q{path(t){const{points:e}=this,[{x:i,y:n}]=e,s=new bt(i,n);return t&&(t.beginPath(),t.moveTo(i,n)),e.forEach(a=>{let{x:r,y:l}=a;s.addPoint(r,l),t&&t.lineTo(r,l)}),s}getMarkers(){const{points:t}=this,e=t.length-1,i=[];return t.forEach((n,s)=>{s!==e&&i.push([n,n.angleTo(t[s+1])])}),i.length>0&&i.push([t[t.length-1],i[i.length-1][1]]),i}constructor(t,e,i){super(t,e,i);this.type="polyline",this.points=[],this.points=Z.parsePath(this.getAttribute("points").getString())}}class ar extends hn{path(t){const e=super.path(t),[{x:i,y:n}]=this.points;return t&&(t.lineTo(i,n),t.closePath()),e}constructor(...t){super(...t);this.type="polygon"}}class lr extends Q{createPattern(t,e,i){const n=this.getStyle("width").getPixels("x",!0),s=this.getStyle("height").getPixels("y",!0),a=new he(this.document,null);a.attributes.viewBox=new P(this.document,"viewBox",this.getAttribute("viewBox").getValue()),a.attributes.width=new P(this.document,"width","".concat(n,"px")),a.attributes.height=new P(this.document,"height","".concat(s,"px")),a.attributes.transform=new P(this.document,"transform",this.getAttribute("patternTransform").getValue()),a.children=this.children;const r=this.document.createCanvas(n,s),l=r.getContext("2d"),c=this.getAttribute("x"),u=this.getAttribute("y");c.hasValue()&&u.hasValue()&&l.translate(c.getPixels("x",!0),u.getPixels("y",!0)),i.hasValue()?this.styles["fill-opacity"]=i:Reflect.deleteProperty(this.styles,"fill-opacity");for(let d=-1;d<=1;d++)for(let f=-1;f<=1;f++)l.save(),a.attributes.x=new P(this.document,"x",d*r.width),a.attributes.y=new P(this.document,"y",f*r.height),a.render(l),l.restore();return t.createPattern(r,"repeat")}constructor(...t){super(...t);this.type="pattern"}}class cr extends Q{render(t,e,i){if(!e)return;const{x:n,y:s}=e,a=this.getAttribute("orient").getString("auto"),r=this.getAttribute("markerUnits").getString("strokeWidth");t.translate(n,s),a==="auto"&&t.rotate(i),r==="strokeWidth"&&t.scale(t.lineWidth,t.lineWidth),t.save();const l=new he(this.document);l.type=this.type,l.attributes.viewBox=new P(this.document,"viewBox",this.getAttribute("viewBox").getValue()),l.attributes.refX=new P(this.document,"refX",this.getAttribute("refX").getValue()),l.attributes.refY=new P(this.document,"refY",this.getAttribute("refY").getValue()),l.attributes.width=new P(this.document,"width",this.getAttribute("markerWidth").getValue()),l.attributes.height=new P(this.document,"height",this.getAttribute("markerHeight").getValue()),l.attributes.overflow=new P(this.document,"overflow",this.getAttribute("overflow").getValue()),l.attributes.fill=new P(this.document,"fill",this.getAttribute("fill").getColor("black")),l.attributes.stroke=new P(this.document,"stroke",this.getAttribute("stroke").getValue("none")),l.children=this.children,l.render(t),t.restore(),r==="strokeWidth"&&t.scale(1/t.lineWidth,1/t.lineWidth),a==="auto"&&t.rotate(-i),t.translate(-n,-s)}constructor(...t){super(...t);this.type="marker"}}class ur extends Q{render(){}constructor(...t){super(...t);this.type="defs"}}class Ke extends Ut{getBoundingBox(t){const e=new bt;return this.children.forEach(i=>{e.addBoundingBox(i.getBoundingBox(t))}),e}constructor(...t){super(...t);this.type="g"}}class fn extends Q{getGradientUnits(){return this.getAttribute("gradientUnits").getString("objectBoundingBox")}createGradient(t,e,i){let n=this;this.getHrefAttribute().hasValue()&&(n=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(n));const{stops:s}=n,a=this.getGradient(t,e);if(!a)return this.addParentOpacity(i,s[s.length-1].color);if(s.forEach(r=>{a.addColorStop(r.offset,this.addParentOpacity(i,r.color))}),this.getAttribute("gradientTransform").hasValue()){const{document:r}=this,{MAX_VIRTUAL_PIXELS:l}=At,{viewPort:c}=r.screen,u=c.getRoot(),h=new un(r);h.attributes.x=new P(r,"x",-l/3),h.attributes.y=new P(r,"y",-l/3),h.attributes.width=new P(r,"width",l),h.attributes.height=new P(r,"height",l);const d=new Ke(r);d.attributes.transform=new P(r,"transform",this.getAttribute("gradientTransform").getValue()),d.children=[h];const f=new he(r);f.attributes.x=new P(r,"x",0),f.attributes.y=new P(r,"y",0),f.attributes.width=new P(r,"width",u.width),f.attributes.height=new P(r,"height",u.height),f.children=[d];const g=r.createCanvas(u.width,u.height),p=g.getContext("2d");return p.fillStyle=a,f.render(p),p.createPattern(g,"no-repeat")}return a}inheritStopContainer(t){this.attributesToInherit.forEach(e=>{!this.getAttribute(e).hasValue()&&t.getAttribute(e).hasValue()&&this.getAttribute(e,!0).setValue(t.getAttribute(e).getValue())})}addParentOpacity(t,e){return t.hasValue()?new P(this.document,"color",e).addOpacity(t).getColor():e}constructor(t,e,i){super(t,e,i);this.attributesToInherit=["gradientUnits"],this.stops=[];const{stops:n,children:s}=this;s.forEach(a=>{a.type==="stop"&&n.push(a)})}}class hr extends fn{getGradient(t,e){const i=this.getGradientUnits()==="objectBoundingBox",n=i?e.getBoundingBox(t):null;if(i&&!n)return null;!this.getAttribute("x1").hasValue()&&!this.getAttribute("y1").hasValue()&&!this.getAttribute("x2").hasValue()&&!this.getAttribute("y2").hasValue()&&(this.getAttribute("x1",!0).setValue(0),this.getAttribute("y1",!0).setValue(0),this.getAttribute("x2",!0).setValue(1),this.getAttribute("y2",!0).setValue(0));const s=i?n.x+n.width*this.getAttribute("x1").getNumber():this.getAttribute("x1").getPixels("x"),a=i?n.y+n.height*this.getAttribute("y1").getNumber():this.getAttribute("y1").getPixels("y"),r=i?n.x+n.width*this.getAttribute("x2").getNumber():this.getAttribute("x2").getPixels("x"),l=i?n.y+n.height*this.getAttribute("y2").getNumber():this.getAttribute("y2").getPixels("y");return s===r&&a===l?null:t.createLinearGradient(s,a,r,l)}constructor(t,e,i){super(t,e,i);this.type="linearGradient",this.attributesToInherit.push("x1","y1","x2","y2")}}class fr extends fn{getGradient(t,e){const i=this.getGradientUnits()==="objectBoundingBox",n=e.getBoundingBox(t);if(i&&!n)return null;this.getAttribute("cx").hasValue()||this.getAttribute("cx",!0).setValue("50%"),this.getAttribute("cy").hasValue()||this.getAttribute("cy",!0).setValue("50%"),this.getAttribute("r").hasValue()||this.getAttribute("r",!0).setValue("50%");const s=i?n.x+n.width*this.getAttribute("cx").getNumber():this.getAttribute("cx").getPixels("x"),a=i?n.y+n.height*this.getAttribute("cy").getNumber():this.getAttribute("cy").getPixels("y");let r=s,l=a;this.getAttribute("fx").hasValue()&&(r=i?n.x+n.width*this.getAttribute("fx").getNumber():this.getAttribute("fx").getPixels("x")),this.getAttribute("fy").hasValue()&&(l=i?n.y+n.height*this.getAttribute("fy").getNumber():this.getAttribute("fy").getPixels("y"));const c=i?(n.width+n.height)/2*this.getAttribute("r").getNumber():this.getAttribute("r").getPixels(),u=this.getAttribute("fr").getPixels();return t.createRadialGradient(r,l,u,s,a,c)}constructor(t,e,i){super(t,e,i);this.type="radialGradient",this.attributesToInherit.push("cx","cy","r","fx","fy","fr")}}class dr extends Q{constructor(t,e,i){super(t,e,i);this.type="stop";const n=Math.max(0,Math.min(1,this.getAttribute("offset").getNumber())),s=this.getStyle("stop-opacity");let a=this.getStyle("stop-color",!0);a.getString()===""&&a.setValue("#000"),s.hasValue()&&(a=a.addOpacity(s)),this.offset=n,this.color=a.getColor()}}class Je extends Q{getProperty(){const t=this.getAttribute("attributeType").getString(),e=this.getAttribute("attributeName").getString();return t==="CSS"?this.parent.getStyle(e,!0):this.parent.getAttribute(e,!0)}calcValue(){const{initialUnits:t}=this,{progress:e,from:i,to:n}=this.getProgress();let s=i.getNumber()+(n.getNumber()-i.getNumber())*e;return t==="%"&&(s*=100),"".concat(s).concat(t)}update(t){const{parent:e}=this,i=this.getProperty();if(this.initialValue||(this.initialValue=i.getString(),this.initialUnits=i.getUnits()),this.duration>this.maxDuration){const s=this.getAttribute("fill").getString("remove");if(this.getAttribute("repeatCount").getString()==="indefinite"||this.getAttribute("repeatDur").getString()==="indefinite")this.duration=0;else if(s==="freeze"&&!this.frozen)this.frozen=!0,e&&i&&(e.animationFrozen=!0,e.animationFrozenValue=i.getString());else if(s==="remove"&&!this.removed)return this.removed=!0,e&&i&&i.setValue(e.animationFrozen?e.animationFrozenValue:this.initialValue),!0;return!1}this.duration+=t;let n=!1;if(this.begin<this.duration){let s=this.calcValue();const a=this.getAttribute("type");if(a.hasValue()){const r=a.getString();s="".concat(r,"(").concat(s,")")}i.setValue(s),n=!0}return n}getProgress(){const{document:t,values:e}=this;let i=(this.duration-this.begin)/(this.maxDuration-this.begin),n,s;if(e.hasValue()){const a=i*(e.getValue().length-1),r=Math.floor(a),l=Math.ceil(a);let c;c=e.getValue()[r],n=new P(t,"from",c?parseFloat(c):0),c=e.getValue()[l],s=new P(t,"to",c?parseFloat(c):0),i=(a-r)/(l-r)}else n=this.from,s=this.to;return{progress:i,from:n,to:s}}constructor(t,e,i){super(t,e,i);this.type="animate",this.duration=0,this.initialUnits="",this.removed=!1,this.frozen=!1,t.screen.animations.push(this),this.begin=this.getAttribute("begin").getMilliseconds(),this.maxDuration=this.begin+this.getAttribute("dur").getMilliseconds(),this.from=this.getAttribute("from"),this.to=this.getAttribute("to"),this.values=new P(t,"values",null);const n=this.getAttribute("values");n.hasValue()&&this.values.setValue(n.getString().split(";"))}}class gr extends Je{calcValue(){const{progress:t,from:e,to:i}=this.getProgress(),n=new qe(e.getColor()),s=new qe(i.getColor());if(n.ok&&s.ok){const a=n.r+(s.r-n.r)*t,r=n.g+(s.g-n.g)*t,l=n.b+(s.b-n.b)*t;return"rgb(".concat(Math.floor(a),", ").concat(Math.floor(r),", ").concat(Math.floor(l),")")}return this.getAttribute("from").getColor()}constructor(...t){super(...t);this.type="animateColor"}}class pr extends Je{calcValue(){const{progress:t,from:e,to:i}=this.getProgress(),n=ht(e.getString()),s=ht(i.getString());return n.map((r,l)=>{const c=s[l];return r+(c-r)*t}).join(" ")}constructor(...t){super(...t);this.type="animateTransform"}}class dn extends Q{constructor(t,e,i){super(t,e,i);this.type="font-face",this.ascent=this.getAttribute("ascent").getNumber(),this.descent=this.getAttribute("descent").getNumber(),this.unitsPerEm=this.getAttribute("units-per-em").getNumber()}}class ti extends q{constructor(t,e,i){super(t,e,i);this.type="glyph",this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber(),this.unicode=this.getAttribute("unicode").getString(),this.arabicForm=this.getAttribute("arabic-form").getString()}}class gn extends ti{constructor(...t){super(...t);this.type="missing-glyph",this.horizAdvX=0}}class mr extends Q{render(){}constructor(t,e,i){super(t,e,i);this.type="font",this.isArabic=!1,this.glyphs={},this.arabicGlyphs={},this.isRTL=!1,this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber();const{definitions:n}=t,{children:s}=this;for(const a of s)if(a instanceof dn){this.fontFace=a;const r=a.getStyle("font-family");r.hasValue()&&(n[r.getString()]=this)}else if(a instanceof gn)this.missingGlyph=a;else if(a instanceof ti)if(a.arabicForm){this.isRTL=!0,this.isArabic=!0;const r=this.arabicGlyphs[a.unicode];typeof r=="undefined"?this.arabicGlyphs[a.unicode]={[a.arabicForm]:a}:r[a.arabicForm]=a}else this.glyphs[a.unicode]=a}}class yr extends kt{getText(){const t=this.getHrefAttribute().getDefinition();if(t){const e=t.children[0];if(e)return e.getText()}return""}constructor(...t){super(...t);this.type="tref"}}class br extends kt{getText(){return this.text}renderChildren(t){if(this.hasText){super.renderChildren(t);const{document:e,x:i,y:n}=this,{mouse:s}=e.screen,a=new P(e,"fontSize",lt.parse(e.ctx.font).fontSize);s.isWorking()&&s.checkBoundingBox(this,new bt(i,n-a.getPixels("y"),i+this.measureText(t),n))}else if(this.children.length>0){const e=new Ke(this.document);e.children=this.children,e.parent=this,e.render(t)}}onClick(){const{window:t}=this.document;t&&t.open(this.getHrefAttribute().getString())}onMouseMove(){const t=this.document.ctx;t.canvas.style.cursor="pointer"}constructor(t,e,i){super(t,e,i);this.type="a";const{childNodes:n}=e,s=n[0],a=n.length>0&&Array.from(n).every(r=>r.nodeType===3);this.hasText=a,this.text=a?this.getTextFromNode(s):""}}class vr extends kt{getText(){return this.text}path(t){const{dataArray:e}=this;t&&t.beginPath(),e.forEach(i=>{let{type:n,points:s}=i;switch(n){case L.LINE_TO:t&&t.lineTo(s[0],s[1]);break;case L.MOVE_TO:t&&t.moveTo(s[0],s[1]);break;case L.CURVE_TO:t&&t.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5]);break;case L.QUAD_TO:t&&t.quadraticCurveTo(s[0],s[1],s[2],s[3]);break;case L.ARC:{const[a,r,l,c,u,h,d,f]=s,g=l>c?l:c,p=l>c?1:l/c,m=l>c?c/l:1;t&&(t.translate(a,r),t.rotate(d),t.scale(p,m),t.arc(0,0,g,u,u+h,Boolean(1-f)),t.scale(1/p,1/m),t.rotate(-d),t.translate(-a,-r));break}case L.CLOSE_PATH:t&&t.closePath();break}})}renderChildren(t){this.setTextData(t),t.save();const e=this.parent.getStyle("text-decoration").getString(),i=this.getFontSize(),{glyphInfo:n}=this,s=t.fillStyle;e==="underline"&&t.beginPath(),n.forEach((a,r)=>{const{p0:l,p1:c,rotation:u,text:h}=a;t.save(),t.translate(l.x,l.y),t.rotate(u),t.fillStyle&&t.fillText(h,0,0),t.strokeStyle&&t.strokeText(h,0,0),t.restore(),e==="underline"&&(r===0&&t.moveTo(l.x,l.y+i/8),t.lineTo(c.x,c.y+i/5))}),e==="underline"&&(t.lineWidth=i/20,t.strokeStyle=s,t.stroke(),t.closePath()),t.restore()}getLetterSpacingAt(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.letterSpacingCache[t]||0}findSegmentToFitChar(t,e,i,n,s,a,r,l,c){let u=a,h=this.measureText(t,l);l===" "&&e==="justify"&&i<n&&(h+=(n-i)/s),c>-1&&(u+=this.getLetterSpacingAt(c));const d=this.textHeight/20,f=this.getEquidistantPointOnPath(u,d,0),g=this.getEquidistantPointOnPath(u+h,d,0),p={p0:f,p1:g},m=f&&g?Math.atan2(g.y-f.y,g.x-f.x):0;if(r){const y=Math.cos(Math.PI/2+m)*r,T=Math.cos(-m)*r;p.p0=fi(vt({},f),{x:f.x+y,y:f.y+T}),p.p1=fi(vt({},g),{x:g.x+y,y:g.y+T})}return u+=h,{offset:u,segment:p,rotation:m}}measureText(t,e){const{measuresCache:i}=this,n=e||this.getText();if(i.has(n))return i.get(n);const s=this.measureTargetText(t,n);return i.set(n,s),s}setTextData(t){if(this.glyphInfo)return;const e=this.getText(),i=e.split(""),n=e.split(" ").length-1,s=this.parent.getAttribute("dx").split().map(x=>x.getPixels("x")),a=this.parent.getAttribute("dy").getPixels("y"),r=this.parent.getStyle("text-anchor").getString("start"),l=this.getStyle("letter-spacing"),c=this.parent.getStyle("letter-spacing");let u=0;!l.hasValue()||l.getValue()==="inherit"?u=c.getPixels():l.hasValue()&&l.getValue()!=="initial"&&l.getValue()!=="unset"&&(u=l.getPixels());const h=[],d=e.length;this.letterSpacingCache=h;for(let x=0;x<d;x++)h.push(typeof s[x]!="undefined"?s[x]:u);const f=h.reduce((x,A,B)=>B===0?0:x+A||0,0),g=this.measureText(t),p=Math.max(g+f,0);this.textWidth=g,this.textHeight=this.getFontSize(),this.glyphInfo=[];const m=this.getPathLength(),y=this.getStyle("startOffset").getNumber(0)*m;let T=0;(r==="middle"||r==="center")&&(T=-p/2),(r==="end"||r==="right")&&(T=-p),T+=y,i.forEach((x,A)=>{const{offset:B,segment:R,rotation:N}=this.findSegmentToFitChar(t,r,p,m,n,T,a,x,A);T=B,!(!R.p0||!R.p1)&&this.glyphInfo.push({text:i[A],p0:R.p0,p1:R.p1,rotation:N})})}parsePathData(t){if(this.pathLength=-1,!t)return[];const e=[],{pathParser:i}=t;for(i.reset();!i.isEnd();){const{current:n}=i,s=n?n.x:0,a=n?n.y:0,r=i.next();let l=r.type,c=[];switch(r.type){case L.MOVE_TO:this.pathM(i,c);break;case L.LINE_TO:l=this.pathL(i,c);break;case L.HORIZ_LINE_TO:l=this.pathH(i,c);break;case L.VERT_LINE_TO:l=this.pathV(i,c);break;case L.CURVE_TO:this.pathC(i,c);break;case L.SMOOTH_CURVE_TO:l=this.pathS(i,c);break;case L.QUAD_TO:this.pathQ(i,c);break;case L.SMOOTH_QUAD_TO:l=this.pathT(i,c);break;case L.ARC:c=this.pathA(i);break;case L.CLOSE_PATH:q.pathZ(i);break}r.type!==L.CLOSE_PATH?e.push({type:l,points:c,start:{x:s,y:a},pathLength:this.calcLength(s,a,l,c)}):e.push({type:L.CLOSE_PATH,points:[],pathLength:0})}return e}pathM(t,e){const{x:i,y:n}=q.pathM(t).point;e.push(i,n)}pathL(t,e){const{x:i,y:n}=q.pathL(t).point;return e.push(i,n),L.LINE_TO}pathH(t,e){const{x:i,y:n}=q.pathH(t).point;return e.push(i,n),L.LINE_TO}pathV(t,e){const{x:i,y:n}=q.pathV(t).point;return e.push(i,n),L.LINE_TO}pathC(t,e){const{point:i,controlPoint:n,currentPoint:s}=q.pathC(t);e.push(i.x,i.y,n.x,n.y,s.x,s.y)}pathS(t,e){const{point:i,controlPoint:n,currentPoint:s}=q.pathS(t);return e.push(i.x,i.y,n.x,n.y,s.x,s.y),L.CURVE_TO}pathQ(t,e){const{controlPoint:i,currentPoint:n}=q.pathQ(t);e.push(i.x,i.y,n.x,n.y)}pathT(t,e){const{controlPoint:i,currentPoint:n}=q.pathT(t);return e.push(i.x,i.y,n.x,n.y),L.QUAD_TO}pathA(t){let{rX:e,rY:i,sweepFlag:n,xAxisRotation:s,centp:a,a1:r,ad:l}=q.pathA(t);return n===0&&l>0&&(l-=2*Math.PI),n===1&&l<0&&(l+=2*Math.PI),[a.x,a.y,e,i,r,l,s,n]}calcLength(t,e,i,n){let s=0,a=null,r=null,l=0;switch(i){case L.LINE_TO:return this.getLineLength(t,e,n[0],n[1]);case L.CURVE_TO:for(s=0,a=this.getPointOnCubicBezier(0,t,e,n[0],n[1],n[2],n[3],n[4],n[5]),l=.01;l<=1;l+=.01)r=this.getPointOnCubicBezier(l,t,e,n[0],n[1],n[2],n[3],n[4],n[5]),s+=this.getLineLength(a.x,a.y,r.x,r.y),a=r;return s;case L.QUAD_TO:for(s=0,a=this.getPointOnQuadraticBezier(0,t,e,n[0],n[1],n[2],n[3]),l=.01;l<=1;l+=.01)r=this.getPointOnQuadraticBezier(l,t,e,n[0],n[1],n[2],n[3]),s+=this.getLineLength(a.x,a.y,r.x,r.y),a=r;return s;case L.ARC:{s=0;const c=n[4],u=n[5],h=n[4]+u;let d=Math.PI/180;if(Math.abs(c-h)<d&&(d=Math.abs(c-h)),a=this.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],c,0),u<0)for(l=c-d;l>h;l-=d)r=this.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],l,0),s+=this.getLineLength(a.x,a.y,r.x,r.y),a=r;else for(l=c+d;l<h;l+=d)r=this.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],l,0),s+=this.getLineLength(a.x,a.y,r.x,r.y),a=r;return r=this.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],h,0),s+=this.getLineLength(a.x,a.y,r.x,r.y),s}}return 0}getPointOnLine(t,e,i,n,s){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:e,r=arguments.length>6&&arguments[6]!==void 0?arguments[6]:i;const l=(s-i)/(n-e+Jt);let c=Math.sqrt(t*t/(1+l*l));n<e&&(c*=-1);let u=l*c,h=null;if(n===e)h={x:a,y:r+u};else if((r-i)/(a-e+Jt)===l)h={x:a+c,y:r+u};else{let d=0,f=0;const g=this.getLineLength(e,i,n,s);if(g<Jt)return null;let p=(a-e)*(n-e)+(r-i)*(s-i);p/=g*g,d=e+p*(n-e),f=i+p*(s-i);const m=this.getLineLength(a,r,d,f),y=Math.sqrt(t*t-m*m);c=Math.sqrt(y*y/(1+l*l)),n<e&&(c*=-1),u=l*c,h={x:d+c,y:f+u}}return h}getPointOnPath(t){const e=this.getPathLength();let i=0,n=null;if(t<-5e-5||t-5e-5>e)return null;const{dataArray:s}=this;for(const a of s){if(a&&(a.pathLength<5e-5||i+a.pathLength+5e-5<t)){i+=a.pathLength;continue}const r=t-i;let l=0;switch(a.type){case L.LINE_TO:n=this.getPointOnLine(r,a.start.x,a.start.y,a.points[0],a.points[1],a.start.x,a.start.y);break;case L.ARC:{const c=a.points[4],u=a.points[5],h=a.points[4]+u;if(l=c+r/a.pathLength*u,u<0&&l<h||u>=0&&l>h)break;n=this.getPointOnEllipticalArc(a.points[0],a.points[1],a.points[2],a.points[3],l,a.points[6]);break}case L.CURVE_TO:l=r/a.pathLength,l>1&&(l=1),n=this.getPointOnCubicBezier(l,a.start.x,a.start.y,a.points[0],a.points[1],a.points[2],a.points[3],a.points[4],a.points[5]);break;case L.QUAD_TO:l=r/a.pathLength,l>1&&(l=1),n=this.getPointOnQuadraticBezier(l,a.start.x,a.start.y,a.points[0],a.points[1],a.points[2],a.points[3]);break}if(n)return n;break}return null}getLineLength(t,e,i,n){return Math.sqrt((i-t)*(i-t)+(n-e)*(n-e))}getPathLength(){return this.pathLength===-1&&(this.pathLength=this.dataArray.reduce((t,e)=>e.pathLength>0?t+e.pathLength:t,0)),this.pathLength}getPointOnCubicBezier(t,e,i,n,s,a,r,l,c){const u=l*Zi(t)+a*Ki(t)+n*Ji(t)+e*tn(t),h=c*Zi(t)+r*Ki(t)+s*Ji(t)+i*tn(t);return{x:u,y:h}}getPointOnQuadraticBezier(t,e,i,n,s,a,r){const l=a*en(t)+n*nn(t)+e*sn(t),c=r*en(t)+s*nn(t)+i*sn(t);return{x:l,y:c}}getPointOnEllipticalArc(t,e,i,n,s,a){const r=Math.cos(a),l=Math.sin(a),c={x:i*Math.cos(s),y:n*Math.sin(s)};return{x:t+(c.x*r-c.y*l),y:e+(c.x*l+c.y*r)}}buildEquidistantCache(t,e){const i=this.getPathLength(),n=e||.25,s=t||i/100;if(!this.equidistantCache||this.equidistantCache.step!==s||this.equidistantCache.precision!==n){this.equidistantCache={step:s,precision:n,points:[]};let a=0;for(let r=0;r<=i;r+=n){const l=this.getPointOnPath(r),c=this.getPointOnPath(r+n);!l||!c||(a+=this.getLineLength(l.x,l.y,c.x,c.y),a>=s&&(this.equidistantCache.points.push({x:l.x,y:l.y,distance:r}),a-=s))}}}getEquidistantPointOnPath(t,e,i){if(this.buildEquidistantCache(e,i),t<0||t-this.getPathLength()>5e-5)return null;const n=Math.round(t/this.getPathLength()*(this.equidistantCache.points.length-1));return this.equidistantCache.points[n]||null}constructor(t,e,i){super(t,e,i);this.type="textPath",this.textWidth=0,this.textHeight=0,this.pathLength=-1,this.glyphInfo=null,this.letterSpacingCache=[],this.measuresCache=new Map([["",0]]);const n=this.getHrefAttribute().getDefinition();this.text=this.getTextFromNode(),this.dataArray=this.parsePathData(n)}}const xr=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,(.*)$/i;class wr extends Ut{async loadImage(t){try{const e=await this.document.createImage(t);this.image=e}catch(e){console.error('Error while loading image "'.concat(t,'":'),e)}this.loaded=!0}async loadSvg(t){const e=xr.exec(t);if(e){const i=e[5];i&&(e[4]==="base64"?this.image=atob(i):this.image=decodeURIComponent(i))}else try{const n=await(await this.document.fetch(t)).text();this.image=n}catch(i){console.error('Error while loading image "'.concat(t,'":'),i)}this.loaded=!0}renderChildren(t){const{document:e,image:i,loaded:n}=this,s=this.getAttribute("x").getPixels("x"),a=this.getAttribute("y").getPixels("y"),r=this.getStyle("width").getPixels("x"),l=this.getStyle("height").getPixels("y");if(!(!n||!i||!r||!l)){if(t.save(),t.translate(s,a),typeof i=="string"){const c=e.canvg.forkString(t,i,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:0,offsetY:0,scaleWidth:r,scaleHeight:l}),{documentElement:u}=c.document;u&&(u.parent=this),c.render()}else e.setViewBox({ctx:t,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:r,desiredWidth:i.width,height:l,desiredHeight:i.height}),this.loaded&&(!("complete"in i)||i.complete)&&t.drawImage(i,0,0);t.restore()}}getBoundingBox(){const t=this.getAttribute("x").getPixels("x"),e=this.getAttribute("y").getPixels("y"),i=this.getStyle("width").getPixels("x"),n=this.getStyle("height").getPixels("y");return new bt(t,e,t+i,e+n)}constructor(t,e,i){super(t,e,i);this.type="image",this.loaded=!1;const n=this.getHrefAttribute().getString();if(!n)return;const s=n.endsWith(".svg")||/^\s*data:image\/svg\+xml/i.test(n);t.images.push(this),s?this.loadSvg(n):this.loadImage(n)}}class Sr extends Ut{render(t){}constructor(...t){super(...t);this.type="symbol"}}class Tr{async load(t,e){try{const{document:i}=this,s=(await i.canvg.parser.load(e)).getElementsByTagName("font");Array.from(s).forEach(a=>{const r=i.createElement(a);i.definitions[t]=r})}catch(i){console.error('Error while loading font "'.concat(e,'":'),i)}this.loaded=!0}constructor(t){this.document=t,this.loaded=!1,t.fonts.push(this)}}class pn extends Q{constructor(t,e,i){super(t,e,i);this.type="style",Kt(Array.from(e.childNodes).map(a=>a.textContent).join("").replace(/(\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"").replace(/@import.*;/g,"")).split("}").forEach(a=>{const r=a.trim();if(!r)return;const l=r.split("{"),c=l[0].split(","),u=l[1].split(";");c.forEach(h=>{const d=h.trim();if(!d)return;const f=t.styles[d]||{};if(u.forEach(g=>{const p=g.indexOf(":"),m=g.substr(0,p).trim(),y=g.substr(p+1,g.length-p).trim();m&&y&&(f[m]=new P(t,m,y))}),t.styles[d]=f,t.stylesSpecificity[d]=zs(d),d==="@font-face"){const g=f["font-family"].getString().replace(/"|'/g,"");f.src.getString().split(",").forEach(m=>{if(m.indexOf('format("svg")')>0){const y=Gi(m);y&&new Tr(t).load(g,y)}})}})})}}pn.parseExternalUrl=Gi;class Ar extends Ut{setContext(t){super.setContext(t);const e=this.getAttribute("x"),i=this.getAttribute("y");e.hasValue()&&t.translate(e.getPixels("x"),0),i.hasValue()&&t.translate(0,i.getPixels("y"))}path(t){const{element:e}=this;e&&e.path(t)}renderChildren(t){const{document:e,element:i}=this;if(i){let n=i;if(i.type==="symbol"&&(n=new he(e),n.attributes.viewBox=new P(e,"viewBox",i.getAttribute("viewBox").getString()),n.attributes.preserveAspectRatio=new P(e,"preserveAspectRatio",i.getAttribute("preserveAspectRatio").getString()),n.attributes.overflow=new P(e,"overflow",i.getAttribute("overflow").getString()),n.children=i.children,i.styles.opacity=new P(e,"opacity",this.calculateOpacity())),n.type==="svg"){const a=this.getStyle("width",!1,!0),r=this.getStyle("height",!1,!0);a.hasValue()&&(n.attributes.width=new P(e,"width",a.getString())),r.hasValue()&&(n.attributes.height=new P(e,"height",r.getString()))}const s=n.parent;n.parent=this,n.render(t),n.parent=s}}getBoundingBox(t){const{element:e}=this;return e?e.getBoundingBox(t):null}elementTransform(){const{document:t,element:e}=this;return e?Ft.fromElement(t,e):null}get element(){return this.cachedElement||(this.cachedElement=this.getHrefAttribute().getDefinition()),this.cachedElement}constructor(...t){super(...t);this.type="use"}}function Ee(o,t,e,i,n,s){return o[e*i*4+t*4+s]}function _e(o,t,e,i,n,s,a){o[e*i*4+t*4+s]=a}function tt(o,t,e){return o[t]*e}function Ct(o,t,e,i){return t+Math.cos(o)*e+Math.sin(o)*i}class mn extends Q{apply(t,e,i,n,s){const{includeOpacity:a,matrix:r}=this,l=t.getImageData(0,0,n,s);for(let c=0;c<s;c++)for(let u=0;u<n;u++){const h=Ee(l.data,u,c,n,s,0),d=Ee(l.data,u,c,n,s,1),f=Ee(l.data,u,c,n,s,2),g=Ee(l.data,u,c,n,s,3);let p=tt(r,0,h)+tt(r,1,d)+tt(r,2,f)+tt(r,3,g)+tt(r,4,1),m=tt(r,5,h)+tt(r,6,d)+tt(r,7,f)+tt(r,8,g)+tt(r,9,1),y=tt(r,10,h)+tt(r,11,d)+tt(r,12,f)+tt(r,13,g)+tt(r,14,1),T=tt(r,15,h)+tt(r,16,d)+tt(r,17,f)+tt(r,18,g)+tt(r,19,1);a&&(p=0,m=0,y=0,T*=g/255),_e(l.data,u,c,n,s,0,p),_e(l.data,u,c,n,s,1,m),_e(l.data,u,c,n,s,2,y),_e(l.data,u,c,n,s,3,T)}t.clearRect(0,0,n,s),t.putImageData(l,0,0)}constructor(t,e,i){super(t,e,i);this.type="feColorMatrix";let n=ht(this.getAttribute("values").getString());switch(this.getAttribute("type").getString("matrix")){case"saturate":{const s=n[0];n=[.213+.787*s,.715-.715*s,.072-.072*s,0,0,.213-.213*s,.715+.285*s,.072-.072*s,0,0,.213-.213*s,.715-.715*s,.072+.928*s,0,0,0,0,0,1,0,0,0,0,0,1];break}case"hueRotate":{const s=n[0]*Math.PI/180;n=[Ct(s,.213,.787,-.213),Ct(s,.715,-.715,-.715),Ct(s,.072,-.072,.928),0,0,Ct(s,.213,-.213,.143),Ct(s,.715,.285,.14),Ct(s,.072,-.072,-.283),0,0,Ct(s,.213,-.213,-.787),Ct(s,.715,-.715,.715),Ct(s,.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break}case"luminanceToAlpha":n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1];break}this.matrix=n,this.includeOpacity=this.getAttribute("includeOpacity").hasValue()}}class Me extends Q{apply(t,e){const{document:i}=this;let n=this.getAttribute("x").getPixels("x"),s=this.getAttribute("y").getPixels("y"),a=this.getStyle("width").getPixels("x"),r=this.getStyle("height").getPixels("y");if(!a&&!r){const f=new bt;this.children.forEach(g=>{f.addBoundingBox(g.getBoundingBox(t))}),n=Math.floor(f.x1),s=Math.floor(f.y1),a=Math.floor(f.width),r=Math.floor(f.height)}const l=this.removeStyles(e,Me.ignoreStyles),c=i.createCanvas(n+a,s+r),u=c.getContext("2d");i.screen.setDefaults(u),this.renderChildren(u),new mn(i,{nodeType:1,childNodes:[],attributes:[{nodeName:"type",value:"luminanceToAlpha"},{nodeName:"includeOpacity",value:"true"}]}).apply(u,0,0,n+a,s+r);const h=i.createCanvas(n+a,s+r),d=h.getContext("2d");i.screen.setDefaults(d),e.render(d),d.globalCompositeOperation="destination-in",d.fillStyle=u.createPattern(c,"no-repeat"),d.fillRect(0,0,n+a,s+r),t.fillStyle=d.createPattern(h,"no-repeat"),t.fillRect(0,0,n+a,s+r),this.restoreStyles(e,l)}render(t){}constructor(...t){super(...t);this.type="mask"}}Me.ignoreStyles=["mask","transform","clip-path"];const yn=()=>{};class Cr extends Q{apply(t){const{document:e}=this,i=Reflect.getPrototypeOf(t),{beginPath:n,closePath:s}=t;i&&(i.beginPath=yn,i.closePath=yn),Reflect.apply(n,t,[]),this.children.forEach(a=>{if(!("path"in a))return;let r="elementTransform"in a?a.elementTransform():null;r||(r=Ft.fromElement(e,a)),r&&r.apply(t),a.path(t),i&&(i.closePath=s),r&&r.unapply(t)}),Reflect.apply(s,t,[]),t.clip(),i&&(i.beginPath=n,i.closePath=s)}render(t){}constructor(...t){super(...t);this.type="clipPath"}}class Pe extends Q{apply(t,e){const{document:i,children:n}=this,s="getBoundingBox"in e?e.getBoundingBox(t):null;if(!s)return;let a=0,r=0;n.forEach(y=>{const T=y.extraFilterDistance||0;a=Math.max(a,T),r=Math.max(r,T)});const l=Math.floor(s.width),c=Math.floor(s.height),u=l+2*a,h=c+2*r;if(u<1||h<1)return;const d=Math.floor(s.x),f=Math.floor(s.y),g=this.removeStyles(e,Pe.ignoreStyles),p=i.createCanvas(u,h),m=p.getContext("2d");i.screen.setDefaults(m),m.translate(-d+a,-f+r),e.render(m),n.forEach(y=>{typeof y.apply=="function"&&y.apply(m,0,0,u,h)}),t.drawImage(p,0,0,u,h,d-a,f-r,u,h),this.restoreStyles(e,g)}render(t){}constructor(...t){super(...t);this.type="filter"}}Pe.ignoreStyles=["filter","transform","clip-path"];class Er extends Q{apply(t,e,i,n,s){}constructor(t,e,i){super(t,e,i);this.type="feDropShadow",this.addStylesFromStyleDefinition()}}class _r extends Q{apply(t,e,i,n,s){}constructor(...t){super(...t);this.type="feMorphology"}}class Mr extends Q{apply(t,e,i,n,s){}constructor(...t){super(...t);this.type="feComposite"}}class Pr extends Q{apply(t,e,i,n,s){const{document:a,blurRadius:r}=this,l=a.window?a.window.document.body:null,c=t.canvas;c.id=a.getUniqueId(),l&&(c.style.display="none",l.appendChild(c)),Es(c,e,i,n,s,r),l&&l.removeChild(c)}constructor(t,e,i){super(t,e,i);this.type="feGaussianBlur",this.blurRadius=Math.floor(this.getAttribute("stdDeviation").getNumber()),this.extraFilterDistance=this.blurRadius}}class Or extends Q{constructor(...t){super(...t);this.type="title"}}class Nr extends Q{constructor(...t){super(...t);this.type="desc"}}const kr={svg:he,rect:un,circle:sr,ellipse:rr,line:or,polyline:hn,polygon:ar,path:q,pattern:lr,marker:cr,defs:ur,linearGradient:hr,radialGradient:fr,stop:dr,animate:Je,animateColor:gr,animateTransform:pr,font:mr,"font-face":dn,"missing-glyph":gn,glyph:ti,text:kt,tspan:Ce,tref:yr,a:br,textPath:vr,image:wr,g:Ke,symbol:Sr,style:pn,use:Ar,mask:Me,clipPath:Cr,filter:Pe,feDropShadow:Er,feMorphology:_r,feComposite:Mr,feColorMatrix:mn,feGaussianBlur:Pr,title:Or,desc:Nr};function Vr(o,t){const e=document.createElement("canvas");return e.width=o,e.height=t,e}async function Rr(o){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const e=document.createElement("img");return t&&(e.crossOrigin="Anonymous"),new Promise((i,n)=>{e.onload=()=>{i(e)},e.onerror=(s,a,r,l,c)=>{n(c)},e.src=o})}const ei=12;class Vt{bindCreateImage(t,e){return typeof e=="boolean"?(i,n)=>t(i,typeof n=="boolean"?n:e):t}get window(){return this.screen.window}get fetch(){return this.screen.fetch}get ctx(){return this.screen.ctx}get emSize(){const{emSizeStack:t}=this;return t[t.length-1]||ei}set emSize(t){const{emSizeStack:e}=this;e.push(t)}popEmSize(){const{emSizeStack:t}=this;t.pop()}getUniqueId(){return"canvg".concat(++this.uniqueId)}isImagesLoaded(){return this.images.every(t=>t.loaded)}isFontsLoaded(){return this.fonts.every(t=>t.loaded)}createDocumentElement(t){const e=this.createElement(t.documentElement);return e.root=!0,e.addStylesFromStyleDefinition(),this.documentElement=e,e}createElement(t){const e=t.nodeName.replace(/^[^:]+:/,""),i=Vt.elementTypes[e];return i?new i(this,t):new Ks(this,t)}createTextNode(t){return new nr(this,t)}setViewBox(t){this.screen.setViewBox(vt({document:this},t))}constructor(t,{rootEmSize:e=ei,emSize:i=ei,createCanvas:n=Vt.createCanvas,createImage:s=Vt.createImage,anonymousCrossOrigin:a}={}){this.canvg=t,this.definitions={},this.styles={},this.stylesSpecificity={},this.images=[],this.fonts=[],this.emSizeStack=[],this.uniqueId=0,this.screen=t.screen,this.rootEmSize=e,this.emSize=i,this.createCanvas=n,this.createImage=this.bindCreateImage(s,a),this.screen.wait(()=>this.isImagesLoaded()),this.screen.wait(()=>this.isFontsLoaded())}}Vt.createCanvas=Vr,Vt.createImage=Rr,Vt.elementTypes=kr;class te{static async from(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=await new Ze(i).parse(e);return new te(t,s,i)}static fromString(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=new Ze(i).parseFromString(e);return new te(t,s,i)}fork(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return te.from(t,e,vt(vt({},this.options),i))}forkString(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return te.fromString(t,e,vt(vt({},this.options),i))}ready(){return this.screen.ready()}isReady(){return this.screen.isReady()}async render(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.start(vt({enableRedraw:!0,ignoreAnimation:!0,ignoreMouse:!0},t)),await this.ready(),this.stop()}start(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{documentElement:e,screen:i,options:n}=this;i.start(e,vt(vt({enableRedraw:!0},n),t))}stop(){this.screen.stop()}resize(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.documentElement.resize(t,e,i)}constructor(t,e,i={}){this.parser=new Ze(i),this.screen=new At(t,i),this.options=i;const n=new Vt(this,i),s=n.createDocumentElement(e);this.document=n,this.documentElement=s}}function Dr(o){let t,e;return{c(){t=F("pre"),e=F("code"),this.h()},l(i){t=$(i,"PRE",{style:!0});var n=U(t);e=$(n,"CODE",{id:!0}),U(e).forEach(M),n.forEach(M),this.h()},h(){z(e,"id",o[0]),Be(t,"display","none"),Be(t,"width","0px"),Be(t,"height","0px")},m(i,n){at(i,t,n),I(t,e)},p:rt,i:rt,o:rt,d(i){i&&M(t)}}}function Ir(o,t,e){let{option:i=null}=t,n=new ps,s="",a,r=300,l=300,c=`code-${fe.generateRandomString(10)}`;const u=()=>{setTimeout(async()=>{console.log("option",i,r,l),a.writeToDom(`#${c}`,s,r,l);const h=new XMLSerializer().serializeToString(document.getElementById(c)),d=document.createElement("canvas");d.width=r,d.height=l;const f=d.getContext("2d");await(await te.fromString(f,h)).render();let p=await new Promise(y=>d.toBlob(y));const m=await n.blobToBase64(p);Ni.resultCallback("WRITE-CODE-PNG",1,{blob:p,base64:m,width:r,height:l},"")},10)};return ge(async()=>{a=new ZXing.BrowserQRCodeSvgWriter}),o.$$set=h=>{"option"in h&&e(1,i=h.option)},o.$$.update=()=>{o.$$.dirty&30&&i&&(!fe.isEmpty(i.text)&&i.text!=s&&(e(2,s=i.text),u()),!fe.isEmpty(i.width)&&i.width!=r&&(e(3,r=i.width),u()),!fe.isEmpty(i.height)&&i.height!=l&&(e(4,l=i.height),u()))},[c,i,s,r,l]}class Lr extends we{constructor(t){super();xe(this,t,Ir,Dr,ie,{option:1})}}function Br(o){let t,e;return t=new Lr({props:{option:o[2]}}),{c(){$e(t.$$.fragment)},l(i){He(t.$$.fragment,i)},m(i,n){be(t,i,n),e=!0},p(i,n){const s={};n&4&&(s.option=i[2]),t.$set(s)},i(i){e||(Gt(t.$$.fragment,i),e=!0)},o(i){oe(t.$$.fragment,i),e=!1},d(i){ve(t,i)}}}function Fr(o){let t,e;return t=new gs({props:{option:o[2]}}),{c(){$e(t.$$.fragment)},l(i){He(t.$$.fragment,i)},m(i,n){be(t,i,n),e=!0},p(i,n){const s={};n&4&&(s.option=i[2]),t.$set(s)},i(i){e||(Gt(t.$$.fragment,i),e=!0)},o(i){oe(t.$$.fragment,i),e=!1},d(i){ve(t,i)}}}function Ur(o){let t,e;return t=new hs({props:{option:o[2]}}),{c(){$e(t.$$.fragment)},l(i){He(t.$$.fragment,i)},m(i,n){be(t,i,n),e=!0},p(i,n){const s={};n&4&&(s.option=i[2]),t.$set(s)},i(i){e||(Gt(t.$$.fragment,i),e=!0)},o(i){oe(t.$$.fragment,i),e=!1},d(i){ve(t,i)}}}function zr(o){let t,e,i,n;const s=[Ur,Fr,Br],a=[];function r(l,c){return l[1]&&l[0]==="VIDEO-SCAN"?0:l[1]&&l[0]==="WRITE-CODE"?1:l[1]&&l[0]==="WRITE-CODE-PNG"?2:-1}return~(e=r(o))&&(i=a[e]=s[e](o)),{c(){t=F("div"),i&&i.c(),this.h()},l(l){t=$(l,"DIV",{class:!0});var c=U(t);i&&i.l(c),c.forEach(M),this.h()},h(){z(t,"class","py-qrbarcode-app")},m(l,c){at(l,t,c),~e&&a[e].m(t,null),n=!0},p(l,[c]){let u=e;e=r(l),e===u?~e&&a[e].p(l,c):(i&&(Qn(),oe(a[u],1,1,()=>{a[u]=null}),jn()),~e?(i=a[e],i?i.p(l,c):(i=a[e]=s[e](l),i.c()),Gt(i,1),i.m(t,null)):i=null)},i(l){n||(Gt(i),n=!0)},o(l){oe(i),n=!1},d(l){l&&M(t),~e&&a[e].d()}}}function $r(o,t,e){let i;Bn(o,Ye,r=>e(0,i=r));let n=!1,s=!1,a={};return gi("https://unpkg.com/@zxing/library@latest/umd/index.min.js").then(r=>{r.result>0&&e(3,s=!0)}),ge(async()=>{console.log("$$props",t);for(const l in t.rootNode.dataset){console.log("dataset2",l,t.rootNode.dataset[l]);const c=t.rootNode.dataset[l];l==="openmode"&&c!=null&&c!=""&&i!=c&&xi(Ye,i=c,i),l!="destroy"&&(e(2,a[l]=c,a),console.log("dataSetOption========",a),e(2,a))}new MutationObserver(l=>{l.forEach(c=>{for(const u in t.rootNode.dataset){console.log("dataset1",u,t.rootNode.dataset[u]);const h=t.rootNode.dataset[u];u==="openmode"&&h!=null&&h!=""&&i!=h&&xi(Ye,i=h,i),console.log("$openMode",i),u==="destroy"||h===!0?K.resetCodeReader():(e(2,a[u]=h,a),console.log("dataSetOption========",a),e(2,a))}})}).observe(t.rootNode,{attributes:!0,childList:!0,characterData:!0})}),_i(async()=>{K.resetCodeReader(),e(1,n=!1),K.resultCallback("Component Destroy",1,"Destroy","")}),o.$$set=r=>{e(4,t=mi(mi({},t),vi(r)))},o.$$.update=()=>{i&&s&&(console.log("$openMode",i),i==="VIDEO-SCAN"?K.initStore(t).then(r=>{r.result>0&&e(1,n=!0)}):(i==="WRITE-CODE"||i==="WRITE-CODE-PNG")&&Ni.initStore(t).result>0&&e(1,n=!0))},t=vi(t),[i,n,a,s]}class Hr extends we{constructor(t){super();xe(this,t,$r,zr,ie,{})}}var jr="";const Yr="module@papyqrbarcode";window.$papyModules==null&&(window.$papyModules={}),pi("https://dawons.github.io/cdn/static/webfonts/xeicon-2.3.0/xeicon.min.css"),window.$papyModules[Yr]=function(o,t){const e=typeof o=="string"&&o.indexOf("#")==0?document.querySelector(`${o}`):o;t.rootNode=e;for(const n in e.dataset)t[n]==null&&(t[n]=e.dataset[n]);return new Hr({target:e,props:t})}})();
